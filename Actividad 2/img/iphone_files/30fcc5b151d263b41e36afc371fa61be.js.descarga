!function(){let e,t=window,n=!0,o={},s=function(){},r=function(){},a=function(){},i=function(){};try{e=window.top}catch(o){n=!1,e=t}e.__wmass||(e.__wmass={});let c={},l={forceDmpId:{anyof:"string"},forceDmpPKey:{anyof:"string"}};try{e.__wmass.logger||(e.__wmass.logger=(t="",n="")=>{let s,r,a,i,c=[],l=[],f=[],d=[],p=()=>{let e=new Date,t=e.getMilliseconds().toString();return`${e.toLocaleTimeString()}:${t.padStart(4,"0")}`},u=e=>{let t={info:1,log:2,warn:3,error:4}[o.enableLog];return!0===o.enableLog||t>=e};if(s=r=a=i=function(){},e.console){let o=`${"%cWemass"}${t}`,m=["display: inline-block; color: #fff; background: #92c01f; padding: 1px 4px; border-radius: 3px;",n];e.console.info&&(s=function(){let e=u(1),t=o+"%c INFO",n=[...m,"display: inline-block; color: #111 background: #e3e3e3; padding: 1px 4px; border-radius: 3px;"],s=Array.prototype.slice.call(arguments),r=[t,...n,p(),...s];if(e){for(;c.length>0;)c.shift()();console.info.apply(console,r)}else c.push(console.info.bind(console,...r))}),e.console.log&&(r=function(){let e=u(2),t=o+"%c LOG",n=[...m,"display: inline-block; color: #111 background: #3c3c3b; padding: 1px 4px; border-radius: 3px;"],s=Array.prototype.slice.call(arguments),r=[t,...n,p(),...s];if(e){for(;l.length>0;)l.shift()();console.log.apply(console,r)}else l.push(console.log.bind(console,...r))}),e.console.warn&&(a=function(){let e=u(3),t=o+"%c WARN",n=[...m,"display: inline-block; color: #111 background: orange; padding: 1px 4px; border-radius: 3px;"],s=Array.prototype.slice.call(arguments),r=[t,...n,p(),...s];if(e){for(;f.length>0;)f.shift()();console.warn.apply(console,r)}else f.push(console.warn.bind(console,...r))}),e.console.error&&(i=function(){let e=u(4),t=o+"%c ERROR",n=[...m,"display: inline-block; color: #111 background: red; padding: 1px 4px; border-radius: 3px;"],s=Array.prototype.slice.call(arguments),r=[t,...n,p(),...s];if(e){for(;d.length>0;)d.shift()();console.error.apply(console,r)}else d.push(console.error.bind(console,...r))})}return[s,r,a,i]}),[s,r,a,i]=e.__wmass.logger("%cDMP","display: inline-block; color: #fff; background: #658; padding: 1px 4px; border-radius: 3px;")}catch(e){}let f=(e,t)=>{var n,o=Object.prototype.toString.call(e);return t=t||{},n||void 0!==e||(n="undefined"),n||null!==e||(n="null"),!n&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)&&(n="buffer"),n||"object"!=typeof window||e!==window||(n="global"),n||"object"!=typeof global||e!==global||(n="global"),!n&&"number"==typeof e&&isNaN(e)&&(n="nan"),!n&&"object"==typeof e&&"[object Number]"==o&&isNaN(e)&&(n="nan"),n||"object"!=typeof e||"Event]"!=o.substr(-6)||(n="event"),n||"[object HTML"!=o.substr(0,12)||(n="html"),n||"[object Node"!=o.substr(0,12)||(n="html"),n||(n=o.match(/\[object\s*([^\]]+)\]/)[1].toLowerCase()),"object"==n&&t.pojoOnly&&e.constructor&&"Object"==(n=e.constructor.name||"unknown")&&(n="object"),n},d=(e,t,n)=>{let o=new Date,s=1e3,r={B:()=>{s*=0},M:e=>{s*=60*e},H:e=>{s*=3600*e},D:e=>{s*=86400*e},X:()=>{s*=864e5}};for(let e=0;e<t.length;e++)t[e]in r&&r[t[e]](parseInt(t.replace(t[e],""))||1);s+=o.getTime(),o.setTime(s),document.cookie=`${n}=${e}; path=/; domain=${location.hostname}; expires=${o.toUTCString()}; samesite=none; secure`};try{e.__wmass.testMode||(e.__wmass.testMode=function(t={},n="wmsstst"){let o=()=>{let t=(t=>{let n=t+"=",o=e.document.cookie.split(";");for(let e of o){for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(n))return e.substring(n.length,e.length)}return null})(n);if("string"===f(t))try{return JSON.parse(t)}catch(e){console.log(e,"error > valor de wmsstst = "+t)}return{}},r=e=>{let t=["raPreviewMode=0; Max-Age=0; path=/; samesite=None; domain=.richaudience.com; secure","apn_prebid_debug=0; Max-Age=0; samesite=none; secure"];for(let e of t)document.cookie=e;!1===e?d(e,"B",n):d(JSON.stringify(e),"H",n)},a=(e=>{let t={enableLog:{values:[!0,"info","log","warn","error"],cookie:!0}};for(let n in e)t[n]||(t[n]=e[n]);return t})(t);return(t={})=>{if(!1===t)return r(!1),{};if("object"===f(t)){let n=((...e)=>{let t={};for(let n of e)if("object"===f(n))for(let e in n)t[e]||(t[e]=n[e]);return t})(t,o(),(()=>{let t="wmsstst",n=e.location.search.replace("?","");if(-1===n.indexOf(t))return{};let o=n.split("&"),r={};for(let e of o)if(-1!==e.indexOf(t))if(e===t)r[enableTestCreatives]=!0;else{let[t,n]=e.replace("wmsstst.","").split("=");0===t.indexOf("key.")?(t=t.replace("key.",""),r.keywords||(r.keywords={}),r.keywords[t]||(r.keywords[t]=[]),-1===r.keywords[t].indexOf(n)&&r.keywords[t].push(n)):("true"===n&&(n=!0),"string"===f(n)&&r[t]?("string"===f(r[t])&&(r[t]=[r[t]]),r[t].push(n)):r[t]=n)}return s("parametros wemass detectados",r),r})()),i={},c={};for(let e in n)if(a[e]){let t=!1,o=n[e],s=a[e],{values:r,cookie:l=!1,anyof:d}=s,p=f(r),u=f(d),m=f(o);switch("string"===u&&m===d&&(t=!0),p){case"array":r.indexOf(o)>-1&&(t=!0);break;case"boolean":t=!0===o;case"function":t=r(o)}!0===t&&(c[e]=o,!0===l&&(i[e]=o))}return Object.keys(i).length>0&&r(i),c}}}),o=new e.__wmass.testMode(l,"30fcc5b151d263b41e36afc371fa61be")()}catch(e){}r("Loading Wemass DMP Tag PRISA~DMP");let p,u,m=t=>"addon"===t?function(n,o={},...r){o.page||(o.page={});let a=o.page.type;["articulo","noticia","article","otros"].indexOf(a)>-1&&!o.page.classifications_watson&&(o.page.classifications_watson={categories:"$alchemy_taxonomy",keywords:"$alchemy_keywords",sentiment:"$alchemy_document_sentiment"}),s(`Llamando a __wmass.dmp.${t} con argumentos`,[n,o,...r]),e.permutive[t].apply(null,[n,o,...r])}:"identify"===t?function(n=[],...o){let r=f(n);("array"===r||"string"===r)&&n.length>0&&(s(`Llamando a __wmass.dmp.${t} con argumentos`,[n,...o]),e.permutive[t].apply(null,[n,...o]))}:function(){s(`Llamando a __wmass.dmp.${t} con argumentos`,arguments),e.permutive[t].apply(null,arguments)},g=(e,n={})=>{let o="string"===f(e);if(o&&(e=n.useNs?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)),null!=typeof n)for(let o in n)if("string"===f(o)){let s=n[o],r=f(s);switch(o){case"T":e.appendChild(document.createTextNode(s));break;case"com":e.appendChild(document.createComment(s));break;case"Ct":e.style.cssText=s;break;case"Cn":if("string"===r||"array"===r){let t,n=[];if("string"===r?t=[s]:"array"===r&&(t=s),"array"===f(t))for(let e of t)"string"===f(e)&&("."===e.charAt(0)&&(e=e.substr(1)),n.push(e));n.length>0&&e.classList.add(...n)}break;case"H":e.innerHTML=s;break;case"St":t.attachEvent&&!t.opera?e.styleSheet.cssText=s:g(e,{T:s});break;default:"useNs"!==o&&(n.useNs?e.setAttributeNS(null,o,s):e.setAttribute(o,s))}}if(o)return e},b=(n,o,a,i,l)=>{if(!e.__wmass.dmp){if("string"===f(a)&&a.length>0&&"string"===f(i)&&i.length>0){r(`cargando dmp projectId: ${a}, key: ${i}`),"object"!==f(c)&&(c={}),e.__wmass.dmp=e.__wmass.dmp||{};let n=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"];if(!o){o=o||{},e.permutive=o,o.q=[],o.config=l||{},o.config.projectId=a,o.config.apiKey=i,o.config.environment=o.config.environment||"production";for(let e of n)o[e]=function(e){return function(){let t=Array.prototype.slice.call(arguments,0);o.q.push({functionName:e,arguments:t})}}(e)}s("iniciando permutive"),((e="about:blank",n="asyncScript",o=t)=>{let s=g("script",{src:e,async:"async",Cn:[n]});(o.document.body||o.document.head).appendChild(s)})(`https://cdn.permutive.com/${a}-web.js`);for(let t of n)!e.__wmass.dmp[t]&&e.permutive[t]&&(e.__wmass.dmp[t]=m(t))}e.__wmass.dmp.ready((function(){s("permutive initialised")}),"initialised"),e.__wmass.dmp.ready((function(){s("permutive realtime")}),"realtime")}},_=()=>{if(r("permisos suficientes obtenidos o no habia CMP. Iniciando"),b(e.document,e.permutive,"28986622-e6be-473d-9a8f-e603a25f3c66","390f11db-6eea-42eb-9ef9-4d27b1bb2bab",c),"array"===f(e.__wmass.bff)&&e.__wmass.bff.length>0){s("Ejecutando funciones en el buffer");for(let t of e.__wmass.bff)"function"===f(t)&&t()}"object"!==f(e.__wmass.bff)&&(e.__wmass.bff={push:function(e){"function"===f(e)&&e()}})},y=(e={},t={},n=!1)=>{let o=!0,s=f(n);for(let r in e)t.hasOwnProperty(r)&&!0===t[r]?e[r]=t[r]:o=!1,!1===o&&"object"===s&&!0===n[r]&&(e[r]=n[r],o=!0);return!1===o&&i("Consentimiento insuficiente. Obtenido:",e),o},w={getVendorConsents:e=>{try{let t,n=!0,{purposeConsents:o}=e;t=!n||y({1:!1,2:!1,3:!1,5:!1},o),!0===t&&_()}catch(e){i(e)}}},h={addEventListener:(t,n)=>{if(n){let n,o=!0,{eventStatus:s,listenerId:a,purpose:{consents:i={},legitimateInterests:c={}}={}}=t;r("Evento DMP purposes: ejecutado. Status: "+s),"tcloaded"!==s&&"useractioncomplete"!==s||(n=!o||y({1:!1,3:!1,4:!1,7:!1,10:!1},i),n&&(_(),e.__tcfapi("removeEventListener",2,(e=>{e&&r("Evento DMP purposes eliminado")}),a)))}}},k={milis:!1,callback:_};e.__wmass.bff||(e.__wmass.bff=[]),(({cmpCallbackTcf1:t={},cmpCallbackTcf2:n={},cmpTimeout:o={}})=>{let{milis:s=!1,callback:a}=o,c=f(a);if(e.__cmp||e.__tcfapi){if(e.__wmass.consentData||(e.__wmass.consentData={}),u=e.__wmass.consentData,e.__tcfapi)if(r("TCF v2 CMP detectado"),p=2,"object"===f(n)){if(!u.getTCData){let t=(t,n)=>{n&&(r("TCF v2 generic eventListener ejecutado. Estatus: "+t.eventStatus),("tcloaded"===t.eventStatus||"useractioncomplete"===t.eventStatus)&&"string"===f(t.tcString)&&t.tcString.length>0&&(r("TCF v2 generic eventListener tcdataString disponible: "+t.tcString),u.getTCData=t,e.__tcfapi("removeEventListener",2,(e=>{e&&r("TCF v2 generic eventListener event removed")}),t.listenerId)))};e.__tcfapi("addEventListener",2,t)}for(let t in n){let o=n[t],s=f(o);"function"===s?e.__tcfapi(t,2,o):i(`tcfversion 2 callback para ${t} es de tipo  ${s} se esperaba una funcion`)}}else i("Wemass CMP module required, tcfversion 2 detected but no cmpCallbackTcf2 set");else if(e.__cmp)if(r("TCF v1 CMP detectado"),p=1,"object"===f(t)){u.getConsentData||e.__cmp("getConsentData",null,(e=>{u.getConsentData=e})),u.getVendorConsents||e.__cmp("getVendorConsents",null,(e=>{u.getVendorConsents=e}));for(let n in t){let o=t[n],s=f(o);"function"===s?e.__cmp(n,null,o):i(`tcfversion 1 callback para ${n} es de tipo  ${s} se esperaba una funcion`)}}else i("Wemass CMP module required, tcfversion 1 detected but no cmpCallbackTcf1 set");0!=s&&"number"===f(s)&&(o.timer=setTimeout(a,s))}else"function"===c&&a()})({cmpCallbackTcf1:w,cmpCallbackTcf2:h,cmpTimeout:k})}();
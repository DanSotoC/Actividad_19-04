var cincoD=cincoD||{};
(function(h){var e={data:{uid:void 0,nickname:void 0,nombre:void 0,apellido1:void 0,nombre_bonito:void 0,avatar:void 0,product:!1},getData:function(a){void 0===this.data.uid&&this.loadData();return this.data},loadData:function(){for(var a,b=!1,c=decodeURIComponent(document.cookie).split(";"),d=0;d<c.length;d++)if(a=c[d].trim(),"uid_ns="==a.substr(0,7)){b=!0;break}if(b){a=a.substr(7).split("#");this.data.uid=a[0];this.data.nickname=a[1];window.PEPuid=this.data.uid;window.PEPuname=this.data.nickname;
if(a[2])for(c=a[2].split(":"),b=0;b<c.length;b++)d=c[b].match("144\\|[0-9]+"),null!=d&&(d=d[0].split("|"),(new Date).getTime()<1E3*d[1]&&(this.data.product=!0));if(a[3]){c=[];d=a[3].match(/:[^|]+|[^:]+/g);for(b=0;b<d.length;b+=2)c[d[b]]=d[b+1].substr(1);this.data.nombre=this.decodeBase64ToUTF8(c[":NOM"]);this.data.apellido1=this.decodeBase64ToUTF8(c[":AP1"]);this.data.nombre_bonito=this.decodeBase64ToUTF8(c[":NB"]);this.data.avatar=this.getAvatar(this.data.nickname)}}},decodeBase64ToUTF8:function(a){if(!a||
""==a)return"";var b=[],c=0;for(a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");c<a.length;){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a[c++]);var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a[c++]);var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a[c++]);var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a[c++]);b.push(d<<2|f>>4);if(64==e)break;b.push((f&15)<<4|e>>2);if(64==
g)break;b.push((e&3)<<6|g)}return this.decodeBase64(b)},decodeBase64:function(a){for(var b="",c,d,f,e=0;e<a.length;)c=a[e++],128>c?b+=String.fromCharCode(c):191<c&&224>c?(d=a[e++],b+=String.fromCharCode((c&31)<<6|d&63)):(d=a[e++],f=a[e++],b+=String.fromCharCode((c&15)<<12|(d&63)<<6|f&63));return b},getAvatar:function(a){if(!a||""==a)return"";for(var b=[0,0],c=0;c<a.length;c++)b[c%2]+=a[c].charCodeAt(0);for(c=(b[0]%16).toString(16).toUpperCase();1>c.length;)c="0"+c;for(b=(b[1]%256).toString(16).toUpperCase();2>
b.length;)b="0"+b;return"/miperfil/avatares/"+c+"/"+b+"/"+a+".jpg"},showUserInfo:function(a){var b=a.nombre_bonito,c='<img src="https://d500.epimg.net'+a.avatar+'" alt="" width="80" height="80">',d=document.getElementById("boton_usuario");d&&(d.className="boton--ico boton_usuario--dentro");if(d=document.querySelector("#usuario div.usuario__interior div.usuario-estado")){var f='<span class="usuario-nombre"><span>Hola ';b&&(f+=", "+b);f=f+'</span></span><figure class="foto">   <a title="Ver perfil" class="enlace" href="//elpais.com/subscriptions/#/profile?prod=REG5D">   '+
c+"   </a></figure>";f+='<div class="usuario-menu">';f+='   <ul class="usuario-acciones">';f+='       <li><a href="//elpais.com/subscriptions/#/profile?prod=REG5D" class="boton_perfil">Editar perfil</a> </li>';f+='       <li><a href="https://plus.elpais.com/newsletters/lnp/1/350" class="boton_newsletters">Newsletters</a> </li>';f+="   </ul>";f+='   <a href="//elpais.com/subscriptions/#/sign-out?backURL='+encodeURI(window.location.href)+'" class="boton_desconectar">Desconectar</a>';f+="</div> ";d.innerHTML=
f;e.showNoUserLoginComment();void 0!=document.getElementById("botones_suscripcion")?(e.showNoUserLoginComment(),a.product&&e.hideSuscriptionButtons()):e.showNoUserLoginComment()}},showNoUserLoginComment:function(){var a=document.getElementById("articulo-comentarios-login");void 0!=a&&a.classList.add("oculto")},initUser:function(){var a=PRISA.user.getData(),b=document.readyState;"undefined"!=typeof a.nickname&&("interactive"==b||"complete"==b?e.showUserInfo(a):document.addEventListener?document.addEventListener("DOMContentLoaded",
function(){e.showUserInfo(a)},!1):document.attachEvent&&document.attachEvent("onload",function(){e.showUserInfo(a)},!1))}};h.user=e;e.initUser();document.addEventListener?document.addEventListener("oncookiessetted",function(){cincoD.user.initUser()},!1):document.attachEvent&&document.attachEvent("oncookiessetted",function(){cincoD.user.initUser()},!1)})(cincoD);
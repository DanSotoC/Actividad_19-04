<!DOCTYPE html>
<!-- saved from url=(0307)https://cincodias.elpais.com/Comentarios/comentarios.html?ghi=1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e&gcss=/cincodias/estilos/v2.x/v2.2/comentarios/eskup_comentarios_noticia.css&gjs=1&gll=0&gjs=1&gurl=https%3A%2F%2Fcincodias.elpais.com%2Fcincodias%2F2019%2F04%2F26%2Fsmartphones%2F1556301475_074522.html -->
<html xmlns="http://www.w3.org/1999/xhtml" style="overflow: hidden;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Comentarios</title>

<meta name="Description" content="Conversa sobre los temas que te interesan y que proponen nuestros expertos.">
<meta name="Keywords" content="widget, eskup, red, actualidad, noticias, informacion, videos, fotografias, temas, expertos, usuarios, opinion, participacion">
<meta name="Generator" content="EDICIONES EL PAIS, S.L.">
<meta name="Origen" content="EDICIONES EL PAIS, S.L.">
<meta name="Author" content="EDICIONES EL PAIS, S.L.">
<meta name="Locality" content="Madrid, España">
<meta name="lang" content="es">
<meta name="revisit-after" content="1 days">
<meta name="robots" content="NOINDEX,NOFOLLOW">
<link href="http://eskup.elpais.com/" rel="canonical">
<script language="Javascript" type="text/javascript">

//valores de servidores/cache
var secure_environment = "1";
var _hostCache = "http://skp00.epimg.net";
var _hostCacheSecure = "https://skp00.epimg.net";
var _secure_server_imgs = "https://skp00.epimg.net";
var _hostImages = "https://skp00.epimg.net";
var _secure_server = "http://cincodias.com";

if(typeof _medioOrigen == 'undefined'){
    var _medioOrigen = 'dias5';
}
</script>
<link rel="stylesheet" href="./eskup_comentarios_noticia.css" type="text/css">
<link rel="stylesheet" href="./eskup_ampliar_foto.css" type="text/css">
<script language="Javascript" type="text/javascript" src="./eskup-20200330-03.js.descarga"></script><style type="text/css">.boton_video { background-image: url('//ep00.epimg.net/iconos/v1.x/v1.0/varios/boton_video_miniatura.png'); background-position: 0 0; background-repeat: no-repeat; bottom: 15px; display: block; height: 35px; left: 15px; position: absolute; width: 65px;}
</style>
<script language="Javascript" type="text/javascript" src="./eskup_widget-20170213-01.js.descarga"></script>
<script language="Javascript" type="text/javascript">
//<![CDATA[
var LANGESKUP = 'es';
var _hostCDNtsUpdate  = "//skp03.epimg.net";
var _idContenedorMsgs = "contenedor_mensajes";
var _idContenedorPag  = "contenedor_paginacion";
var _idContenedorForm = "contenedor_formulario";
var _idContenedorErr  = "contenedor_error";
var _idPlantillaMsg   = "plantilla_mensaje";
var _idPlantillaPag   = "plantilla_paginacion";
var _idContenedorRefr = "contenedor_refresco";
var _idContenedorEscribeMsg  = "id_escribir_mensaje";
var _idContenedorHiloCerrado = "id_hilo_cerrado";
var _numMsgCache      = 40;
var _numPagActual     = 1;
var _numPagCache      = 1;
var _numMsgPag        = 20;
var _tablon           = "";
var _nickname         = "";
var _tablon1          = "";
var _hilo             = "1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e";
var _hashMsgs         = Array();
var _hashExtraMsgs    = Array();
var _tipoTablon       = 1;
var _tipoHilo         = "1";
var _longIdMensaje    = 43;
var _ultimaRecargaServidor   = 0;
var _ultimaRecargaProteccion = 0;

// Para portada
var _segsRecRapida = 45;
var _segsRecLenta  = 60;

var _segsMinEntreRecargas = 90;
var _intRecarga    = undefined;
var _tsTablon1     = 0;
var _tsTablon2     = 0;
var _tsTablon3     = 0;
var _tsTablonTodos = 0;
var _tsTablonOp    = 0;
var _tsTablonSeg   = 0;
var _arrayEventosSeleccionadosParaEscribir = Array();
var _texto_inicializacion_textarea = "Tu comentario";
var _texto_inicializacion_textarea_responder = "Tu respuesta";
var _idContenedorHilo    = "contenedor_mensajes";
var _idPlantillaMsgHilo  = "plantilla_mensaje";
var _idHilo              = "";
var _hashEventosSeguidos     = Array();
var _hashEventosParaEscribir = Array();
var _numeroEventosSeguidos  = 0;
var _numeroEventosParaEscribir  = 0;
var _evento_actual_cerrado = 0;
var _obtenidosEventosParaEscribir = false;
var _mostrarPanelAclaracion = true;
var _url_imagen_por_defecto = "/Iconos/v1.x/v1.0/varios/no_foto_tema.png";
var _url_imagen_usuario_por_defecto = "/Iconos/v1.x/v1.0/varios/no_foto.jpg";
var _url_servidor = 'http://eskup.elpais.com';
var _numero_maximo_caracteres_mensaje  = 1120;
var _dimension_maxima_imagen_x = 250;
var _es_primera_carga           = 1;
var _es_primera_llamada_publi   = 1;
var _es_primera_contabilizacion = 1;
var _maxAnchoFoto        = 432;
var _maxAnchoFotoDefecto = 432;
var _formatoVisualizacion = 'web';
var _formatoVisualizacionReal = 'c';
var _mostrarPanelAclaracion = false;
var _mostrarVideosEnMensaje   = '1';
var _pintarPaginacion         = '1';
var _activarRecargaAutomatica = false;
var _identificadorWidget      = 'comentarios_noticia_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e';
var _tsHoraActual = 0;
var _quiensoy = "comentarios";
var _comentariosActivos = false;
var _s = "6a112cdefd0683252b9efad11fb38fa3";
var _quitaEnlacesEskup = '1'; // No queremos enlaces a eskup
// Variable que activa/desactiva el lazy load de las imagenes del flujo de mensajes
var _lazyfy = true;
var twSharedTextCom             = 'Comentario en @el_pais';
var fbSharedTextCom             = 'Comentario en El PAÍS';
var gpSharedTextCom             = 'Comentario en El PAÍS';
var lkSharedTextCom             = 'Comentario en El PAÍS';
var _mostrarConversacion        = '1';
//personalizacion de clases para mensajes de comunicaciones y error
var classComunicaciones         = 'notificaciones';
var classErrorComunicaciones    = 'notificaciones';

// clase de la carcasa para el visionado de videos
var classvideos                 = 'comentario-video-alv';

//variable para poder controlar, pq esta en eskup.js y puede afectar a otros medioa :( ,
// que no se machaque el boton original de esponder
var mantenerBtnResponder        = true;
var _htmlPlantillaPersonalizadaUsuario = null;
var _htmlPlantillaPersonalizadaEvento  = null;
var _htmlPlantillaPersonalizadaMsg = null;
var _htmlPlantillaPersonalizadaPag = null;
var _htmlPlantillaPersonalizadaPestana = null;
var _altoVentana               = 0;
var _numMensajes               = null;
var _objIframeContenedor       = null;
var _objDivNumComentarios      = null;
var _objDivNumComentariosFirma = null;
var _objDivNumComentariosHSup  = null;
var _objDivNumComentariosHInf  = null;
var _intAltoVentana            = null;
var _mostrarScroll             = '0';
var _urlContenedor             = 'https://cincodias.elpais.com/cincodias/2019/04/26/smartphones/1556301475_074522.html';
var _objDivNumComentariosPestana    = null;
var _objDivNumComentariosPestanaOp  = null;
var _objDivNumComentariosPestanaSeg = null;
var _tipoConversacion          = 't';
var _urlNoticia = 'http://elpais.com/';
//Variables empleadas para modificar diseño a fuego que hay en eskupjs y no alterar el resto de widgets
//clase que emplemaos para errores
var classErrorComunicaciones = 'notificaciones';

//Variables para los textos de los botones de respuesta en modo conversacion
var _textoRespuestas ='Respuestas';
var _textoRespuestaUnica ='Respuesta';

//array con las funciones que se ejecutan despues de cargar los resultados
var postChargeActions = [function(){comentarios.checkNoMensaje(_tipoConversacion);},function(){comentarios.setcont();},function(){comentarios.markvalorados();}];



idCapaPulsadaxxx = '000xxxEstacapanodebeexistir';

comentarios = {
    
    changeSrc: function(tipe){
        var url = '';
        var tipelist = 't';
       
        
        comentarios.changeTextButton(tipe);
 
        
        document.getElementById('capaSelector').classList.toggle('oculto');
        
        switch(tipe){
            case 'conversacion':
                tipelist = 'c';
            break;
            case 'top-rated':
                tipelist = 'r';
            break;
            case 'top-oldies':
                tipelist = 'o';
            break;
            case 'timeline':
                tipelist = 't';
            break; 
            default:
                tipelist = 't';
            break;
        }
        if(window.location.href.search(/&mtc=[t,c,o,r]/) > 0){
            url = window.location.href.replace(/&mtc=[t,c,o,r]/,'&mtc='+tipelist);
        }else{
            url = window.location.href+'&mtc='+tipelist;
        }
        
        if(url.search(/#[1-9]+/)>0){
             url = url.replace(/#[1-9]+/,'');
        }
        window.location.href = url;
    },

    
    /**
      * Funcion para valora mensajes es una capa que recubre la llamada a la funcion de
      * eskup.js comprobando primero que no este ya pulsado en cuyo caso levanta un aviso
      * y para la peticion
      */
    valorar: function(idMensaje,valoracion,callBackFunction,nickAutor){
        var txtVal = 'positivas'
        if(valoracion == 'negative'){
            txtVal = 'negativas';
        }
        //Protegemos contra autovaloracion
        if(nickAutor == _nickname){
            if(document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje)){
                   document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).classList.remove('oculto');
                   var txtTmpValorado = document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).innerHTML;
                   document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).innerHTML = _ESKUPhashMsgByLang[LANGESKUP].autovaloracion;
                   setTimeout (function() {
                           document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).classList.add('oculto');
                           document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).innerHTML = txtTmpValorado;
                        },3000
                    );
              }
        }else{
            if(document.getElementById('valoracion_'+txtVal+'_'+idMensaje) &&
                document.getElementById('valoracion_'+txtVal+'_'+idMensaje).className.indexOf("pulsado") != -1){  
                    if(document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje)){
                        document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).classList.remove('oculto');
                        var txtTmpValorado = document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).innerHTML;
                        document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).innerHTML = _ESKUPhashMsgByLang[LANGESKUP].ya_valorado;
                        setTimeout (function() {
                           document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).classList.add('oculto');
                           document.getElementById('tt_valoraciones_'+ txtVal +'_'+ idMensaje).innerHTML = txtTmpValorado;
                           },3000
                        );
    
                    }else{
                        alert(_ESKUPhashMsgByLang[LANGESKUP].ya_valorado);
                    }
            }else{
                    valorarMensaje(idMensaje,valoracion,callBackFunction,nickAutor);
            }
       }
    },
    callbackValoracionPositiva: function(idMensaje, hashDatosRespuesta) {
            comentarios.callbackValoracion(idMensaje, hashDatosRespuesta,'positivas');
    },  
    
    callbackValoracionNegativa: function(idMensaje, hashDatosRespuesta) {
            comentarios.callbackValoracion(idMensaje, hashDatosRespuesta,'negativas');
    },

    callbackValoracion: function(idMensaje, hashDatosRespuesta,tipo) {
        var txtTmpValorado = '';
        
        if (typeof hashDatosRespuesta.errorCode != 'undefined') {
             
             
             if(typeof(Storage) !== "undefined") {
                   
                  if (localStorage['valoraciones'+ tipo +_nickname] == null){
                      localStorage['valoraciones'+ tipo +_nickname] = JSON.stringify(idMensaje+'#');
                  }else{
                      var valoraciones = JSON.parse(localStorage['valoraciones'+tipo+_nickname]);
                      if(valoraciones.indexOf(idMensaje)<0){
                        valoraciones += idMensaje+'#';
                        localStorage['valoraciones'+tipo+_nickname] = JSON.stringify(valoraciones);
                      }
                  }
             }
            
            if (hashDatosRespuesta.errorCode == '200') {
                var divValoraciones = document.getElementById('valoraciones_'+tipo+'_' + idMensaje);
                var numPositivos = parseInt(divValoraciones.innerHTML);
                if(isNaN(numPositivos)){ numPositivos = 0;}
                numPositivos++;
                divValoraciones.innerHTML = numPositivos;
                 if(document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje)){
                   document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).classList.remove('oculto');
                   txtTmpValorado = document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).innerHTML;
                   document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).classList.add('gracias');
                   document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).innerHTML = _ESKUPhashMsgByLang[LANGESKUP].gracias;
                   
                   setTimeout (function() {
                            document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).classList.add('oculto');
                            document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).classList.remove('gracias');
                            document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).innerHTML = txtTmpValorado;
                        },3000
                   );

                }else{
                    alert(_ESKUPhashMsgByLang[LANGESKUP].ya_valorado);
                }

            }
            
            if (hashDatosRespuesta.errorCode == '202') {
                if(document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje)){
                   document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).classList.remove('oculto');
                   txtTmpValorado = document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).innerHTML;  
                   document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).innerHTML = _ESKUPhashMsgByLang[LANGESKUP].ya_valorado;
                   setTimeout (function() {
                            document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).classList.add('oculto');
                            document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).innerHTML = txtTmpValorado;
                        },3000
                    );
                        
                }else{
                    alert(_ESKUPhashMsgByLang[LANGESKUP].ya_valorado);
                }
            }
            
        } else {
            
            if(document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje)){
                document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).classList.remove('oculto');
                txtTmpValorado = document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).innerHTML;
                document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).innerHTML = _ESKUPhashMsgByLang[LANGESKUP].error_valoracion;
                setTimeout (function() {
                        document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).classList.add('oculto');
                        document.getElementById('tt_valoraciones_'+ tipo +'_'+ idMensaje).innerHTML = txtTmpValorado;
                    },3000
                );
            }else{
                alert(_ESKUPhashMsgByLang[LANGESKUP].error_valoracion);
            }
        }
    },
    
     setcont: function(){
         var cont = 1;
         var contInver = _hashMsgs.numMensajes;
         if(_numPagCache>1){
                contInver = contInver-(_numMsgCache*(_numPagCache-1));
                cont = cont +(_numMsgCache*(_numPagCache-1));
         }
         for(i = 0; i<_hashMsgs.mensajes.length; i++){
            if(document.getElementById('contador_'+_hashMsgs.mensajes[i].idMsg)){
                 document.getElementById('contador_'+_hashMsgs.mensajes[i].idMsg).innerHTML = contInver;
            }else if (document.getElementById('contadorinverso_'+_hashMsgs.mensajes[i].idMsg)){
                  document.getElementById('contadorinverso_'+_hashMsgs.mensajes[i].idMsg).innerHTML = cont;
            }
            cont++;
            contInver--;
         }
     },
    
    
     markvalorados : function(){
         var tipos = ['positivas','negativas']; 
         var valoraciones = '';
         if(typeof(Storage) !== "undefined") {
            for (var tv = 0;tv< tipos.length;tv++){

             if (localStorage['valoraciones'+ tipos[tv] +_nickname] != null){
                 var valoraciones = JSON.parse(localStorage['valoraciones'+ tipos[tv] +_nickname]).split('#');
                    for(var i = 0;i < valoraciones.length;i++){
                      if(document.getElementById('valoracion_'+ tipos[tv] +'_' + valoraciones[i])){
                         document.getElementById('valoracion_'+  tipos[tv] +'_' + valoraciones[i]).className += ' pulsado';
                      }
                  }
              }
            }   
         }
      },
      
      
       loadMessages: function(){
               var btn = 'timeline';
               switch(_tipoConversacion){
                case 'c':
                   btn = 'conversacion';
                    bloqueoRecarga = 'com';
                    numMensajesPlusHilo  = 20;
                    idcontenedormensajes = 'contenedor_mensajes';
                    levelContenido       = '1';
                    recuperarInformacionMensajesHiloPorNiveles(_hilo,_hilo,numMensajesPlusHilo,1);
                    paraEventosRecarga();
                break;
                case 'r':
                    btn = 'top-rated';
                    _pintarPaginacion = false;
                    recuperarInformacionMensajesValoracion();
                    bloqueoRecarga = 'com';
                    paraEventosRecarga();
                break;
                case 'o':
                    btn = 'top-oldies';
                    recuperarInformacionMensajesInverso();
                    bloqueoRecarga = 'com';
                    paraEventosRecarga();
                break;
                default:
                    btn = 'timeline';
                    f_lanza_eventos_carga_mensajes();
                break;
            }
            
            comentarios.changeTextButton(btn);
        },
        
        
        changeTextButton: function(tipe){
            if(document.getElementById('btn_'+tipe)){
                document.getElementById('btn_seleccionado').innerHTML = document.getElementById('btn_'+tipe).innerHTML;
            }
        },
        
        
        muestraCapa: function(idCapa,idCapaCont) {
            var capa = document.getElementById(idCapa);
            
            
            
            if(idCapaPulsadaxxx != idCapa){
            
                capa.classList.toggle('oculto');
            
                
                var funcionCierraCapa = function(e) {
                    if (document.getElementById(idCapa) && document.getElementById(idCapa).style.display == 'none') {
                        return false;            
                    }
                    var target = (e && e.target) || (event && event.srcElement);
    
                    while (target.parentNode) {
                      if (target == document.getElementById(idCapa)) {
                         return false;
                      }
                      target = target.parentNode;
                    }
                    if(document.getElementById(idCapa)){
                        
                        
                        idCapaPulsadaxxx = idCapa;
                        document.getElementById(idCapa).classList.add('oculto');
                        if(typeof idCapaCont != 'undefined'){
                            comentarios.classDel(idCapaCont,'pulsado'); 
                        }
                        
                        setTimeout (function() {
                             idCapaPulsadaxxx = '000xxxEstacapanodebeexistir';
                        },100);
                    
                        
                        setTimeout (function() {
                             window.removeEventListener('blur', funcionCierraCapa);
                        }, 100);

                        setTimeout (function() {
                            document.removeEventListener('mouseup', funcionCierraCapa);
                        }, 100);
                    }
                }   

                
                setTimeout (function() {
                     window.addEventListener('blur', funcionCierraCapa);
                }, 100);
    
                setTimeout (function() {
                    document.addEventListener('mouseup', funcionCierraCapa);
                }, 100);
            }else{
                if(typeof idCapaCont != 'undefined'){
                            comentarios.classDel(idCapaCont,'pulsado');
                 } 
            }
        },
       
       
        toggleColapsado: function(id){
            if(document.getElementById(id)){
                var patt = new RegExp("ctr-colapsado");
                if(!patt.test(document.getElementById(id).className)){
                    
                    document.getElementById(id).classList.add('ctr-colapsado');
                    document.getElementById(id).classList.add('colapsado');
                    setTimeout(function(){document.getElementById(id).classList.toggle('colapsado');},100);
                }else{
                        document.getElementById(id).classList.toggle('colapsado');
                }
            }
        },
        
        classDel: function(id,classTogg){
           if(document.getElementById(id)){
              var patt = new RegExp(classTogg);
              if(patt.test(document.getElementById(id).className)){
                 document.getElementById(id).classList.toggle(classTogg);
              }
           }
        },
         
        changeClassCondition: function(id,classTogg,idTest){
            if(!document.getElementById(idTest) && document.getElementById(id)){
                    document.getElementById(id).classList.toggle(classTogg);    
            }
        },
        
        
        addClass: function(capas,clase){
            for(var i = 0 ;i < capas.length; i++){
                if(document.getElementById(capas[i])){
                    document.getElementById(capas[i]).classList.add(clase);
                }
            }
        },
        
        
        removeClass: function(capas,clase){
            for(var i = 0 ;i < capas.length; i++){
                if(document.getElementById(capas[i])){
                    document.getElementById(capas[i]).classList.remove(clase);
                }
            }
        },
        checkNoMensaje: function(tipoConversacion){
            if (_hashMsgs.numMensajes == 0 || (typeof _hashMsgs.mensajes !='undefined' && _hashMsgs.mensajes.length  == 0)){
                if(document.getElementById('contenedor_error_valoracion')){
					var txtNoMensajes = _ESKUPhashMsgByLang[LANGESKUP].no_hay_mensajes_disponibles;
					if(typeof tipoConversacion != 'undefined'){
						switch(tipoConversacion){
						case 'r':
							if(typeof _ESKUPhashMsgByLang[LANGESKUP].no_hay_mensajes_valorados != 'undefined'){
								txtNoMensajes = _ESKUPhashMsgByLang[LANGESKUP].no_hay_mensajes_valorados;
							}
                            document.getElementById('contenedor_error_valoracion').innerHTML = '<p>'+txtNoMensajes+'</p>';
                            document.getElementById('contenedor_error_valoracion').style.display = '';
						break;
						default:
                            if(document.getElementById('configurador_selector')){
                                document.getElementById('configurador_selector').classList.add('oculto');
                            }
							txtNoMensajes = _ESKUPhashMsgByLang[LANGESKUP].no_hay_mensajes_disponibles;
						}					
					}
				}
            }
        },
        
        /**
         * Funcion que compara el tamaño de la imagen con el contenedor y en caso de que el tamaño sea mayor que la imagen                             * la muestra la imagen grande en vez de aprecer la pequeña con el boton de ampliar
         * idcontenedorImg id del div contenedor
         * urlImg-> url de la imagen grande
         * elementReplace-> id de la etiqueta img
         * widthImg-> withd imagen grande
         * heightImg-> height imagen grande
         * idAmpliar-> id boton ampliar foto
         */
        checkDimImg: function(idcontenedorImg,urlImg,elementReplace,widthImg,heightImg,idAmpliar){
           var maxHeight = 800;
           if(document.getElementById(idcontenedorImg) && 
              document.getElementById(elementReplace) && 
              document.getElementById(idcontenedorImg).offsetWidth >= widthImg &&
              heightImg < maxHeight    
             ){
                document.getElementById(elementReplace).src = urlImg;
                document.getElementById(elementReplace).width = widthImg;
                document.getElementById(elementReplace).height = heightImg;
                //eliminamos el boton de ampliar
                if(document.getElementById(idAmpliar)){
                    document.getElementById(idAmpliar).outerHTML = "";
                }                
                                        
           } 
        }
          
}
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['comentario_destacado'] = "Usuario destacado";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['responder'] = "Responder";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['participa_foro'] = "Participa en el Foro abierto EL PAÍS";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['accede_foro'] = "Accede desde aquí al nuevo espacio de comentarios de nuestra web";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['autenticado'] = "Tienes que estar autenticado para participar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['participa'] = "Participa";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['solicitud_pendiente'] = "Solicitud pendiente de valoración";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['foro'] = "Foro";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['foro_elpais'] = "Foro EL PAÍS";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['lo_que_sigo'] = "Lo que sigo";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['sigo'] = "Sigo";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_mensajes_sigo'] = "Ver solo los mensajes de los usuarios a los que sigo";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_mensajes_foro'] = "Ver solo los mensajes del Foro EL PAÍS";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['los_que_sigo'] = "Los que sigo";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['debes_identificarte'] = "Para ver los mensajes de los usuarios a los que sigues tienes que identificarte";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['todos_los_comentarios'] = "Todos los comentarios";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['todos'] = "Todos";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_todos_comentarios'] = "Ver todos los comentarios";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['comentarios_cerrados'] = "Comentarios cerrados";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['hay_mensajes'] = "Hay mensajes nuevos";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['caracteres'] = "caracteres";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['publicar'] = "Publicar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['negrita'] = "Insertar negrita <sup>CONTROL+N</sup>";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['cursiva'] = "Insertar cursiva <sup>CONTROL+I</sup>";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['adjuntar_imagen'] = "Adjuntar imagen";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['borrar_imagen'] = "Borrar imagen";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['dinos_ubicacion'] = "Dinos la ubicación de la imagen que quieres que acompañe tu mensaje:";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['refrescar'] = "Refrescar página";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['hay_nuevos'] = "Hay mensajes nuevos";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['procesando_mensaje'] = "Estamos procesando tu mensaje. La versión definitiva estará visible inmediatamente.";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mensaje_pendiente_moderacion'] = "Estamos moderando tu comentario. Si es aprobado, estará visible en unos segundos.";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_imagen'] = "Ver imagen";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['foto_mensaje'] = "Foto del mensaje";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_todos_de'] = "Ver todos los mensajes de ";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_mensaje_responde'] = "Ver mensaje al que responde";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ampliar_foto'] = "Ampliar foto";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mas_opciones'] = "Más opciones";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['responde_a'] = "Responder a";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_completa'] = "Ver conversación completa";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['cerrar'] = "Cerrar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['cancelar'] = "Cancelar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ten_cuenta'] = "Tu comentario se publicará con nombre y primer apellido";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['debes_aceptar'] = "Para publicar tu comentario debes aceptar las normas de participación y";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['completar_registro'] = "completar tus datos de registro";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['para_publicar'] = "";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['previamente_puedes'] = "Si lo deseas, puedes  revisar antes tu";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['historial_comentarios'] = "historial de comentarios";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['es_necesario'] = "Es necesario que rellenes tu nombre y primer apellido para publicar tu comentario. Por favor, ";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['activa'] = "activa esos campos en tu perfil de usuario.";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['el_contenido_del_mensaje_no_puede_ser_vacio'] = "No puedes enviar un mensaje vacío";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['pagina_siguiente'] = "Página siguiente";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['pagina_anterior'] = "Página anterior";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['primera_pagina'] = "Primera página";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['el_mensaje_no_puede_tener_mas_de'] = "El mensaje no puede tener más de ";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['espera_por_favor'] = "Espera por favor";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['error_al_realizar_la_operacion'] = "Se ha producido un error al realizar la operación. Por favor, inténtalo más tarde.";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['recargar_la_pagina'] = "Recargar la página";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['tamano_real'] = "Tamaño real";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['continuar'] = "Continuar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['hace'] = "Hace";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['hora'] = "hora";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['horas'] = "horas";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['minuto'] = "minuto";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['minutos'] = "minutos";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['menos_de_un_minuto'] = "Menos de 1 minuto";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['a_las'] = "a las";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_conversaciones'] = "Respuestas";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_conversacion'] = "Respuesta";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ocultar_conversacion'] = "Ocultar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['votar'] = "Votar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['votar_positivo'] = "Votar positivo";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['votar_negativo'] = "Votar negativo";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['gracias'] = "¡Gracias!";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['denunciar'] = "Denunciar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['editar'] = "Editar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['borrar'] = "Borrar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['insulto'] = "Insulto";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['spam'] = "Spam";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['no_acuerdo'] = "No estoy de acuerdo";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['fuera_tema'] = "Fuera de tema";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['gracias_colaborar'] = "Muchas gracias por colaborar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['respuestas'] = "Respuestas";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mensaje_registrado'] = "Tienes que estar registrado y haber iniciado sesión para poder usar esta funcionalidad";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mensaje_suscriptor'] = "Tienes que tener una suscripción y haber iniciado sesión para poder usar esta funcionalidad";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ordenar_por'] = "Ordenar por";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mejor_valorados'] = "Mejor valorados";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mas_nuevos'] = "<em>Más </em>recientes primero";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mas_antiguos'] = "<em>Más </em>antiguos primero";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['modo_conversacion'] = "<em>En </em>modo conversación";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_en'] = "Ver en";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver'] = "Ver";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mostrar_mas'] = "Mostrar más";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mostrar_respuestas'] = "Mostrar respuestas";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ten_cuenta_entrevistas'] = "Ten en cuenta que tu pregunta se publicará con nombre y apellido";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['enviar_pregunta'] = "Enviar pregunta";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['enviar'] = "Enviar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['pregunta_recibida'] = "Pregunta recibida, gracias por tu participación.";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ver_enlace'] = "Ver el enlace permanente";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['compartir'] = "Compartir";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['compartir_mensaje'] = "Compartir mensaje";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['insertar'] = "Insertar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['codigo_insertar'] = "Código para insertar";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['copia_pega'] = "Copia y pega este código en tu página";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['recomendar_facebook'] = "Recomendar en Facebook";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['twittear'] = "Twittear";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['enviar_linkedin'] = "Enviar a Linkedin";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['enviar_google'] = "Enviar a Google +";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['debes_registrado_1'] = "Para poder enviar una pregunta debes estar registrado en";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['debes_registrado_2'] = "y haber iniciado sesión";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['nuevas_preguntas'] = "Hay nuevas preguntas";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['no_existe'] = "La entrevista no existe";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['no_comenzado'] = "La entrevista no ha comenzado";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['entrevista_finalizada'] = "Entrevista finalizada";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['pregunta_aceptada'] = "Pregunta aceptada, en unos segundos podrá ser respondida por el entrevistado.";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['no_hay_preguntas'] = "No hay preguntas disponibles";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['fragmento_charla'] = "Fragmento de la charla con ";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['textoCompartir_1'] = "Fragmento de la charla en EL PAÍS";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['textoCompartir_2'] = "Fragmento de la charla en @el_pais";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['comentario_noticia'] = "Extraído de ";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['comentario_emision'] = "Extraído de ";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['fragmento_charla_twitter'] = "Fragmento de la charla con #NOMBRE_ENTREVISTADO# en @el_pais";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['fragmento_charla_facebook'] = "Fragmento de la charla con #NOMBRE_ENTREVISTADO# en El PAÍS";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['fragmento_charla_linkedin'] = "Fragmento de la charla con #NOMBRE_ENTREVISTADO# en El PAÍS";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['fragmento_charla_googleplus'] = "Fragmento de la charla con #NOMBRE_ENTREVISTADO# en El PAÍS";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['compartir_liveblogging_twitter'] = "#TEXTO_COMPARTIR#";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['compartir_liveblogging_facebook'] = "#TEXTO_COMPARTIR#";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['compartir_liveblogging_linkedin'] = "#TEXTO_COMPARTIR#";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['compartir_liveblogging_googleplus'] = "#TEXTO_COMPARTIR#";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['twitter_via'] = "el_pais";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['mensaje_despedida'] = "Mensaje de despedida";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['enviocorrecto'] = "El mensaje se ha enviado correctamente";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['pendiente_moderacion'] = "(Pendiente de moderación)";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['en_moderacion'] = "(En moderación)";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['tu_comentario'] = "Tu comentario";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['tu_respuesta'] = "Tu respuesta";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['ya_valorado'] = "Ya has valorado este comentario con anterioridad";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['error_valoracion'] = "Ha ocurrido un problema enviando tu valoración";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['no_hay_mensajes_disponibles'] = "No hay ningún mensaje";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['no_hay_mensajes_valorados'] = "Todavía no se ha valorado ningún mensaje";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['confirma_borrar'] = "¿Estás seguro de que deseas borrar tu mensaje?";
  }
  if(_ESKUPhashMsgByLang['es'] != 'undefined'){
        _ESKUPhashMsgByLang['es']['autovaloracion'] = "No puedes valorar tus propios mensajes";
  }

if (typeof ESKUP != "undefined" && ESKUP) {
  if (typeof _plantillaTextoCompartir == 'undefined' || !_plantillaTextoCompartir) {
    _plantillaTextoCompartir = '#TEXTO_COMPARTIR#';
}
if (typeof _viaTwitter == 'undefined' || !_viaTwitter) {
    _viaTwitter = 'el_pais';
}
_resizedWindow = false;
ESKUP.widget = {
    /* Funcion que lanza la secuencia de funciones para onload del body  */
    onloadWidgetESKUP : function(){
                ESKUP.widget.initWidgetESKUP();
                ESKUP.widget.obtenerObjetoIframeSwitch();
                _intAltoVentana = setInterval(ESKUP.widget.enviarNotificacionesContenedor, 100);
    },

    /* Funcion que lanza los listeners de eventos de el contenedor */
    initWidgetESKUP : function() {
                    // Asociamos los eventos "message" a la ventana para el paso de mensaje entre iframes
                    ESKUP.addEvent(window,"message",ESKUP.widget.receiveMessage);
    },
    
    /* Funcion switch quw determina segun sea widget o no como se obtien el iframe */
    obtenerObjetoIframeSwitch: function(){
        if(_quiensoy == 'widget' ){
            ESKUP.widget.obtenerObjetoIframeWidget();
        }else{
            ESKUP.widget.obtenerObjetoIframe();
        }
    },
    
    /*
     * Funcion que procesa los mensajes recibidos desde el contenedor, recibe estructuras
     * JSON como estas ( a fecha 20150721 no se hay acciones con params):
     * {'id':'comentarios_noticia_1305545040-5c4752c5ca3c2c4631f741b41eb9b203','command':'recargaRapida','params':['1230']}
     */ 
     receiveMessage : function(event) {
                    var _cmdHashWidgetEskup = null;
                    try {
                        eval ("_cmdHashWidgetEskup = " + event.data);
                    } catch (e) {
                        return;
                    }
                    
                    /* verificamos que el id del widget es correcto */
                    if (_cmdHashWidgetEskup.id != _identificadorWidget){
                        return;
                    } 
                    //si se define la variable bloqueoRecarga con valor com evitamos la recuperacion
                    //si se anyade algun evento que no sea recarga hay que pasar estas condiciones dentro de switch
                    if(typeof bloqueoRecarga == 'undefined' || bloqueoRecarga != 'com'){
                        /* Pasados los controles ejecutamos la peticion */
                        switch(_cmdHashWidgetEskup.command) {
                            case 'recargaRapida':
                                recargaRapida();
                                break;
                            case 'recargaLenta' :
                                if(document.hasFocus() === false){
                                    recargaLenta();
                                }
                                break; 
                        }
                    }
       },
       
    /* switch para seleccionar que comunicaciones/como se envian segun el tipo de widget */
     enviarNotificacionesContenedor:function(){
              if (!_objIframeContenedor && !parent.postMessage) {
                     clearInterval(_intAltoVentana);
                     return false;
              }
              ESKUP.widget.calculaVentana();
              ESKUP.widget.calculoMensajes();
              
              //Control especial ya que esta funcionalidad no existe en cometarios de el pais  
              if(typeof _nombreEnviado != 'undefined'){
                try{ 
                    ESKUP.widget.calculaNombre();
                }catch(e){}
              }
     },
        
    /*
     * Funcion que calcula el tamaño de la capa, si ha variado y lo comunica a la pagina contenedora
     */
     calculaVentana:function(){
            var _offsetAltoVentana = 15;
            /* Calculo tamano de ventana */  
            if ((_quiensoy == 'comentarios' && (typeof _mostrarScroll == "undefined" || _mostrarScroll != '1'))
                || (_quiensoy == 'widget'  && typeof _iframeAltoVariable != "undefined" && _iframeAltoVariable != 0 )
                || (_quiensoy == "mensajeUnico" && typeof _iframeAltoVariable != "undefined" && _iframeAltoVariable != 0)) {
                
                //En princio se calcula el tamaño de document.documentElement.offsetHeight que debe incluir bordes , pero por si acaso 
                //incluimos el del contyenedor que seguro que siempre lo tenemos
                var altoContenedorActual = document.getElementById('contenedor').clientHeight || document.getElementById('contenedor').offsetHeight;
                
                var altoVentanaActual = Math.max(document.documentElement.offsetHeight,altoContenedorActual);
                
                if (_resizedWindow == false || ((altoVentanaActual > (_altoVentana+_offsetAltoVentana)) || (altoVentanaActual < (_altoVentana-_offsetAltoVentana)) )) {
                        _altoVentana = altoVentanaActual;
                        _resizedWindow = true;
                        if (_objIframeContenedor) {
                           _objIframeContenedor.style.height = (_altoVentana) + "px";
                        }
                        if (parent.postMessage && typeof _identificadorWidget != "undefined") {
                           parent.postMessage("{'id':'" + _identificadorWidget + "','command':'resizeIframe','params':['" + (_altoVentana) + "']}", "*");
                        }
                 }
             }
     },
       
    /**
     * Funcion para calcular el numero de mensajes y comunicarlos a la  capa contenedora
     *
     */
     calculoMensajes : function(){
          if (typeof _hashMsgs.numMensajes != "undefined" ) {
              if (parent.postMessage && typeof _identificadorWidget != "undefined" && _hashMsgs.numMensajes != _numMensajes) {
                  _numMensajes = _hashMsgs.numMensajes;
                  parent.postMessage("{'id':'" + _identificadorWidget + "','command':'setNumMensajes','params':['" + _hashMsgs.numMensajes + "']}", "*");
              }
          } else {
              if (parent.postMessage && typeof _identificadorWidget != "undefined") {
                parent.postMessage("{'id':'" + _identificadorWidget + "','command':'setNumMensajes','params':['']}", "*");
              }
          }
        },

    /**
     * Funcion para post del nombre
     */
     calculaNombre : function (){
          if (!_nombreEnviado) {
              _nombreEnviado = true;
              if (parent.postMessage && typeof _identificadorWidget != "undefined") {
                  parent.postMessage("{'id':'" + _identificadorWidget + "','command':'setNombreUsuario','params':['" + encodeURIComponent(_nombreCompleto) + "']}", "*");
              }
          }
     },
   
    /* 
     * Funcion  que recupera info del iframe contenedor en caso de ser widget
     * 
     */ 
     obtenerObjetoIframeWidget : function() { 
        try { 
           if (window.parent.document) { 
           var arrayIframes = window.parent.document.getElementsByTagName("iframe"); 
             for (var i = 0; i != arrayIframes.length; i++) { 
                if (/\/Widgets\/widget_eskup/.test(arrayIframes[i].src)) { 
                    var docIframe = null; 
                    if (arrayIframes[i].contentDocument) { 
                          docIframe = arrayIframes[i].contentDocument; 
                    } else if (arrayIframes[i].contentWindow) { 
                          docIframe = arrayIframes[i].contentWindow.document; 
                    } 
                    if (docIframe && document == docIframe) { 
                          _objIframeContenedor = arrayIframes[i]; 
                          if (!isIE) { 
                              if (typeof _iframeAltoVariable != 'undefined' && _iframeAltoVariable == '1') {
                                  _objIframeContenedor.scrolling = "no"; 
                                  _objIframeContenedor.style.overflow = "hidden"; 
                              }
                          } 
                    } 
                } 
              } 
            } 
            if (!_objIframeContenedor && typeof _lazyfy != "undefined") { 
                    _lazyfy = false; 
            } 
        } catch (e) { 
            if (typeof _lazyfy != "undefined") { 
                _lazyfy = false; 
            } 
         } 
     },
    
    /*
     * Funcion que recupera info del iframe contenedor en caso de no ser widget
     *
     */
     obtenerObjetoIframe : function() {
          try {
              if (window.parent.document) {
                  if (window.parent.document.getElementById('comentarios_noticia_'+_hilo)) {
                      _objIframeContenedor = window.parent.document.getElementById('comentarios_noticia_'+_hilo);
                  } else {
                      if (typeof _lazyfy != "undefined") {
                          _lazyfy = false;
                      }
                  }
                  if (window.parent.document.getElementById('num_comentarios_noticia_'+_hilo)) {
                      _objDivNumComentarios = window.parent.document.getElementById('num_comentarios_noticia_'+_hilo);
                  }
                  if (window.parent.document.getElementById('num_comentarios_noticia_firma_'+_hilo)) {
                      _objDivNumComentariosFirma = window.parent.document.getElementById('num_comentarios_noticia_firma_'+_hilo);
                  }
              }
          } catch (e) {
              if (typeof _lazyfy != "undefined") {
                  _lazyfy = false;
              }
          }
     },

        /*Funcion que nos devuelve el meta de fb:app_id y author*/
        getMetasFacebook : function() {
            var fbApiId = false;
            var author;
            var metas = document.getElementsByTagName('meta');
            for (i=0; i<metas.length; i++) {
                if(metas[i].getAttribute("property") == 'fb:app_id') { 
                    fbApiId = metas[i].getAttribute("content"); 
                }else if(metas[i].getAttribute("name") == 'author'){
                    author = metas[i].getAttribute("content");
                } 
            }
            if(fbApiId){
                return [fbApiId,author];
            }else{
                return false;
            }
        },

        /*
         * Funcion que llama a ocultar/mostrar(Switch) la capa de conversacion y a recuperacion informacion
         * con esta funcion evitamos la peticion y a recuperacion informacion  
         * en caso de que se oculte la capa.
         */
        muestraConversacion:function(id,hilo,conversacion,idpadre){
                   levelContenido = '';
                    //Ponemos el valor del id del padre para que pueda leerlo eskup js
                    if(document.getElementById('mensaje_'+conversacion)){
                      document.getElementById('mensaje_'+conversacion).setAttribute('fatherId',idpadre);
                        if(document.getElementById('conversacion_'+conversacion).className.indexOf('oculto') != -1){
                            recuperarInformacionMensajesHiloPorNiveles(hilo,conversacion);
                        }else{
                            document.getElementById('conversacion_'+conversacion).innerHTML = '';
                        }  
                    }
        },
       /**
        * Funcion para mostrar ocultar capas, a diferencia de ocultaMuestraCapa, esta funciona como un switch si detecta visible 
        * pone a oculta y viceversa 'no recibe como debe poner el display'
        * parametros id del item que manda la peticion prefijo del item que manda la peticion prefijo item que se ocultamuestra
        * ej ESKUP.mostrarOcultar(id,'muestra_conversacion_','conversacion_')
        *    pulsar sobre muestra_conversacion_12345678 oculta/muestra conversacion_12345678 el id de la conversacion es 12345678
        * return false si pone display none true si pone display '' o no lo cambia
        */
        mostrarOcultarSwitch : function(id,idItemOcultador,idItemOcultable){
                    idItemOcultable = typeof idItemOcultable == 'undefined' ? idItemOcultador : idItemOcultable;
                    if(typeof id != 'undefined'){
                         id = idItemOcultable+id.replace(idItemOcultador,'');
                    }else{
                         id = idItemOcultable;
                    }
                    if(typeof document.getElementById(id) != 'undefined' && document.getElementById(id) != null){
                        if(document.getElementById(id).style.display == 'none'){
                            document.getElementById(id).style.display = '';
                        }else{
                            document.getElementById(id).style.display = 'none';
                            return false;
                        }
                    }
                    return true;
                 },
        
        /**
         * acciones a ejecutar despues de la carga de mensajes
         *
         */
        postCharge: function(){
            if(typeof postChargeActions != 'undefined'){
                for(var i = 0; i < postChargeActions.length ;i++){
                    try{  
                         postChargeActions[i]();
                    }catch(e){}
                }
            }
        }

}//cierre namespace ESKUP.widget

//Asociamos acciones a eventos esperables

ESKUP.addEvent(window,"muestraMensajes",ESKUP.widget.postCharge);
ESKUP.addEvent(window,"muestraHilos",ESKUP.widget.postCharge);

/*#############  Si no existe el namespace ED de entrevistas digitales lo generamos con sus funciones    ############
 ###################################################################################################################*/
if (typeof ESKUP.ED == "undefined" ) {
 ESKUP.ED = {
        //funcion para plegar todos los menus
        desactivarTodosCompartirEmbeber : function() {

            if (typeof _hashMsgs.mensajes != 'undefined') {
                for (var i in _hashMsgs.mensajes) {
                    if (document.getElementById('compartir_' + _hashMsgs.mensajes[i].idMsg)) {
                        document.getElementById('compartir_' + _hashMsgs.mensajes[i].idMsg).className = 'compartir';
                    }
                }
            }

            if (typeof _hashMsgs.mensajes != 'undefined') {
                for (var i in _hashMsgs.mensajes) {
                    if (document.getElementById('embeber_' + _hashMsgs.mensajes[i].idMsg)) {
                        document.getElementById('embeber_' + _hashMsgs.mensajes[i].idMsg).className = 'embeber';
                    }
                }
            }

        },
        
        /* Funcion para plegar-desplegar el menu compatir*/
        activarDesactivarCompartir : function(idDivCompartir) {

            var activarDivCompartir = false;
            var divCompartir        = document.getElementById(idDivCompartir);
            if (divCompartir) {
                if (divCompartir.className == 'compartir') {
                    activarDivCompartir = true;
                } else {
                    divCompartir.className = 'compartir';
                }
            }

            ESKUP.ED.desactivarTodosCompartirEmbeber();

            if (activarDivCompartir) {
                divCompartir.className = 'compartir pulsado';
            }

        },
        
        /* Funcion para plegar-desplegar embebido */
        activarDesactivarEmbeber : function(idDivEmbeber) {
            var activarDivEmbeber = false;
            var divEmbeber        = document.getElementById(idDivEmbeber);
            if (divEmbeber) {
                if (divEmbeber.className == 'embeber') {
                    activarDivEmbeber = true;
                } else {
                    divEmbeber.className = 'embeber';
                }
            }

            ESKUP.ED.desactivarTodosCompartirEmbeber();

            if (activarDivEmbeber) {
                divEmbeber.className = 'embeber pulsado';
            }
        }
  }//FIN namespace eskup.id
}

if (typeof ESKUP.liveblogging == 'undefined') {
    ESKUP.liveblogging = {};
}

if (typeof ESKUP.liveblogging.obtenerDatosEvento != 'function') {
    ESKUP.liveblogging.obtenerDatosEvento = function() {
        var datosEvento = Array();
        if (typeof _hashMsgs.perfilesEventos          != 'undefined' &&
            typeof _hashMsgs.perfilesEventos[_tablon] != 'undefined') {
            datosEvento = _hashMsgs.perfilesEventos[_tablon];
        } else if (typeof _hashDatosEventos != 'undefined' &&
                   typeof _hashDatosEventos[_tablon] != 'undefined') {
            datosEvento = _hashDatosEventos.perfilesEventos[_tablon];
        }
        return datosEvento;
    }
}

if (typeof ESKUP.liveblogging.obtenerTextoCompartir != 'function') {
    ESKUP.liveblogging.obtenerTextoCompartir = function(idMensaje) {
        var textoCompartir  = '';
        var tituloContenido = '';
        var hashDatosMensaje = ESKUP.obtenerDatosExtraMensaje(idMensaje);
        if (hashDatosMensaje.contenido.match(/<h2>(.*?)<\/h2>/i)) {
            textoCompartir = RegExp.$1;
            textoCompartir = textoCompartir.replace(/<[^>]+>/g, '');
        }
        if (textoCompartir == '') {
            if (typeof hashDatosMensaje.textoAsociado != 'undefined' &&
                       hashDatosMensaje.textoAsociado) {
                textoCompartir = hashDatosMensaje.textoAsociado;
            }
        }
        if (textoCompartir) {
            var plantillaTextoCompartir = _plantillaTextoCompartir;
            textoCompartir = plantillaTextoCompartir.replace("#TEXTO_COMPARTIR#", textoCompartir);
        }

        return textoCompartir;
    }
}

if (typeof ESKUP.liveblogging.twitterShare != 'function') {
    ESKUP.liveblogging.twitterShare = function(idMensaje) {
        var textoCompartir = ESKUP.liveblogging.obtenerTextoCompartir(idMensaje);
        var via            = _viaTwitter;
        ESKUP.rrss.twitterShare(idMensaje, textoCompartir, via);
    }
}

if (typeof ESKUP.liveblogging.facebookShare != 'function') {
    ESKUP.liveblogging.facebookShare = function(idMensaje) {
        var textoCompartir = ESKUP.liveblogging.obtenerTextoCompartir(idMensaje);
        ESKUP.rrss.facebookShare(idMensaje, textoCompartir);
    }
}

if (typeof ESKUP.liveblogging.linkedinShare != 'function') {
    ESKUP.liveblogging.linkedinShare = function(idMensaje) {
        var textoCompartir = ESKUP.liveblogging.obtenerTextoCompartir(idMensaje);
        ESKUP.rrss.linkedinShare(idMensaje, textoCompartir);
    }
}

if (typeof ESKUP.liveblogging.googleplusShare != 'function') {
    ESKUP.liveblogging.googleplusShare = function(idMensaje) {
        var textoCompartir = ESKUP.liveblogging.obtenerTextoCompartir(idMensaje);
        ESKUP.rrss.googleplusShare(idMensaje, textoCompartir);
    }
}

if (typeof ESKUP.liveblogging.facebookSwitch != 'function') {
    ESKUP.liveblogging.facebookSwitch = function(idMensaje) {
        var metas = ESKUP.widget.getMetasFacebook();
        var textoCompartir = ESKUP.liveblogging.obtenerTextoCompartir(idMensaje);
        if(metas){
            ESKUP.rrss.facebookFeed(idMensaje,textoCompartir,metas,urlDeadPage);
        } else {
            ESKUP.liveblogging.facebookShare(idMensaje);
        }
    }
}

      /*
       * Funcion mantenida de funcionalidad antigua que recupera info del iframe contenedor
       *
       */
      ESKUP.widget.obtenerObjetoIframe = function() {
          try {
              if (window.parent.document) {
                  if (window.parent.document.getElementById('comentarios_noticia_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e')){
                      _objIframeContenedor = window.parent.document.getElementById('comentarios_noticia_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e');
                  } else if (typeof _lazyfy != "undefined") {
                      _lazyfy = false;
                  }
                  if (window.parent.document.getElementById('num_comentarios_noticia_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e')){
                      _objDivNumComentarios = window.parent.document.getElementById('num_comentarios_noticia_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e');
                  }
                  if (window.parent.document.getElementById('num_comentarios_noticia_firma_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e')){
                      _objDivNumComentariosFirma = window.parent.document.getElementById('num_comentarios_noticia_firma_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e');
                  }
                  if (window.parent.document.getElementById('num_comentarios_header_superior_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e')){
                      _objDivNumComentariosHSup = window.parent.document.getElementById('num_comentarios_header_superior_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e');
                  }
                  if (window.parent.document.getElementById('num_comentarios_header_inferior_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e')){
                      _objDivNumComentariosHInf = window.parent.document.getElementById('num_comentarios_header_inferior_1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e');
                  }
              }
              if(window.parent.location){
                  _urlNoticia = window.parent.location;
              }
          } catch (e) {
              //
              if (typeof _lazyfy != "undefined") {
                  _lazyfy = false;
              }
          }
          if (document.getElementById('num_comentarios_pestana')) {
              _objDivNumComentariosPestana = document.getElementById('num_comentarios_pestana');
          }
          if (document.getElementById('num_comentarios_pestana_opinadores')) {
              _objDivNumComentariosPestanaOp = document.getElementById('num_comentarios_pestana_opinadores');
          }
          if (document.getElementById('num_comentarios_pestana_loquesigo')) {
              _objDivNumComentariosPestanaSeg = document.getElementById('num_comentarios_pestana_loquesigo');
          }
      }

      /**
       * Funcion para calcular el numero de mensajes ly comunicarlos a la  capa contenedora
       *
       */
      ESKUP.widget.calculoMensajes = function(){
          /* Calculo numero de mensajes*/
          if (typeof _hashMsgs.perfilesHilos != "undefined" && typeof _hashMsgs.perfilesHilos['_'+_hilo] != "undefined" &&
                  typeof _hashMsgs.perfilesHilos['_'+_hilo].numero_mensajes != "undefined" ) {
              var numMensajes           = 0;
              var numMensajesTodos      = 0;
              var numMensajesOpinadores = 0;
              if (_hashMsgs.numMensajes > 0) {
                  numMensajes = _hashMsgs.numMensajes;
              }
              if (_hashMsgs.perfilesHilos['_'+_hilo].numero_mensajes > 0) {
                  numMensajesTodos = _hashMsgs.perfilesHilos['_'+_hilo].numero_mensajes;
              }
              if (typeof _hashMsgs.perfilesHilos['_'+_hilo].numero_mensajes_opinadores != "undefined" &&
                      _hashMsgs.perfilesHilos['_'+_hilo].numero_mensajes_opinadores > 0) {
                  numMensajesOpinadores = _hashMsgs.perfilesHilos['_'+_hilo].numero_mensajes_opinadores;
              }

              // Al cambiar de pestana, es posible que estemos recuperando alguna version cacheada
              // del hilo con un numero menor de mensajes (algo que nunca ocurre). Si es asi, restauramos
              if (_objDivNumComentariosPestana &&  parseInt(_objDivNumComentariosPestana.innerHTML) > numMensajesTodos) {
                  numMensajesTodos = _objDivNumComentariosPestana.innerHTML;
              }
              if (_objDivNumComentariosPestanaOp && parseInt(_objDivNumComentariosPestanaOp.innerHTML) > numMensajesOpinadores) {
                  numMensajesOpinadores = _objDivNumComentariosPestanaOp.innerHTML;
              }

              if (_objDivNumComentarios) {
                  if (numMensajesTodos == 0) {
                      _objDivNumComentarios.innerHTML = "";
                  } else {
                      _objDivNumComentarios.innerHTML = "<span class=\"numero\">" + numMensajesTodos + "</span> comentario";
                      if (numMensajesTodos > 1) {
                          _objDivNumComentarios.innerHTML += "s";
                      }
                  }
              }
              if (_objDivNumComentariosFirma) {
                  if (numMensajesTodos == 0) {
                      _objDivNumComentariosFirma.innerHTML = "";
                      _objDivNumComentariosFirma.style.display = "none";
                  } else if (_objDivNumComentariosFirma.innerHTML != numMensajesTodos){
                      _objDivNumComentariosFirma.innerHTML = numMensajesTodos;
                      _objDivNumComentariosFirma.style.display = "inline-block";
                  }
              }
              if (_objDivNumComentariosHSup) {
                  if (numMensajesTodos == 0) {
                      _objDivNumComentariosHSup.innerHTML = "";
                  } else if (_objDivNumComentariosHSup.innerHTML != numMensajesTodos){
                      _objDivNumComentariosHSup.innerHTML = numMensajesTodos;
                  }
              }
              if (_objDivNumComentariosHInf) {
                  if(numMensajesTodos == 0) {
                      _objDivNumComentariosHInf.innerHTML = "";
                  } else if (_objDivNumComentariosHInf.innerHTML != numMensajesTodos) {
                      _objDivNumComentariosHInf.innerHTML = numMensajesTodos;
                  }

              }

              if(_objDivNumComentariosPestana && document.getElementById('flecha_num_comentarios_pestana') && numMensajesTodos != 0){
                  document.getElementById('flecha_num_comentarios_pestana').style.display = 'block';
                  _objDivNumComentariosPestana.innerHTML = numMensajesTodos;
              }

              if(_objDivNumComentariosPestanaOp && document.getElementById('flecha_num_comentarios_pestana_opinadores') && numMensajesOpinadores != 0){
                  document.getElementById('flecha_num_comentarios_pestana_opinadores').style.display = 'block';
                  _objDivNumComentariosPestanaOp.innerHTML = numMensajesOpinadores;
              }

              if(_objDivNumComentariosPestanaSeg && document.getElementById('flecha_num_comentarios_pestana_loquesigo') && _tipoHilo == '2' && numMensajes != 0){
                  document.getElementById('flecha_num_comentarios_pestana_loquesigo').style.display = 'block';
                  _objDivNumComentariosPestanaSeg.innerHTML = numMensajes;
              }
              // Comunicamos el nuevo numero de mensajes a la pagina contenedora
              if (parent.postMessage && typeof _identificadorWidget != "undefined" && numMensajesTodos != _numMensajes){
                  _numMensajes = numMensajesTodos;
                  parent.postMessage("{'id':'" + _identificadorWidget + "','command':'setNumMensajes','params':['" + numMensajesTodos + "']}", "*");
              }
          }

      }
}
</script>
<script src="./AppMeasurement.min.js.descarga" async=""></script><script src="./AppMeasurement_Module_ActivityMap.min.js.descarga" async=""></script><script type="text/javascript" src="./SimpleMediaPlayer.min.js.descarga"></script></head>
<body style="overflow:hidden;" onload="ESKUP.widget.onloadWidgetESKUP();comentarios.loadMessages();" class="comentarios  no-logado" marginwidth="0" marginheight="0"><audio class="audio-for-speech" src=""></audio><div class="translate-tooltip-mtz hidden">
                    <div class="header">
                        <div class="header-controls">
                            <span class="sound-translate"></span>
                            <span class="settings"></span>
                        </div>
                        <div class="translate-icons">
                            <img class="from" src="https://cincodias.elpais.com/Comentarios/comentarios.html?ghi=1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e&amp;gcss=/cincodias/estilos/v2.x/v2.2/comentarios/eskup_comentarios_noticia.css&amp;gjs=1&amp;gll=0&amp;gjs=1&amp;gurl=https%3A%2F%2Fcincodias.elpais.com%2Fcincodias%2F2019%2F04%2F26%2Fsmartphones%2F1556301475_074522.html">
                            <img class="arrow" src="chrome-extension://hiidjliailpkjeigakikbfedlfijngih/images/right-arrow.png">
                            <img class="to" src="https://cincodias.elpais.com/Comentarios/comentarios.html?ghi=1556301765-44bc6f1b3c8c5bdcc369e5d023493c7e&amp;gcss=/cincodias/estilos/v2.x/v2.2/comentarios/eskup_comentarios_noticia.css&amp;gjs=1&amp;gll=0&amp;gjs=1&amp;gurl=https%3A%2F%2Fcincodias.elpais.com%2Fcincodias%2F2019%2F04%2F26%2Fsmartphones%2F1556301475_074522.html">
                        </div>
                    </div>
                    <div class="translated-text">
                        <div class="words"></div>
                        <div class="sentences"></div>
                    </div>
                    <div class="controls">
                        <div class="controls__control-wrapper">
                            <span class="controls__description">
                                Fast traslate
                            </span>
                            <span class="controls__toggle dbl-click active" data-store="double_click">
                                <div class="controls__inner-circle"></div>
                            </span>
                        </div>
                        <div class="controls__control-wrapper">
                            <span class="controls__description">
                                Icon translate
                            </span>
                            <span class="controls__toggle icon-trans active" data-store="icon_trans">
                                <div class="controls__inner-circle"></div>
                            </span>
                        </div>
                    </div>
                </div><span class="translate-button-mtz hidden"></span><div id="pxlhddncntrl" style="display:none"><script src="./user.min.js(2).descarga"></script><script src="./user.min.js(1).descarga"></script><script>var DTM = {"config":{"allowAll":false}};</script><script src="./launch-f2b3c876fe9c.min.js.descarga"></script><script src="./comun.min.js.descarga"></script><script src="./shareSession.js.descarga"></script></div>
<script language="Javascript" type="text/javascript">
//<![CDATA[

var _soyOpinador        = false;
var _arrayListaSeguidos = Array();
var _estadoPostulacion  = 'NOPOSTULADO';

function irAForoElPais() {
    window.parent.location='http://elpais.com/foro-abierto/?backURL='+encodeURIComponent(_urlNoticia);
}

//]]>
</script>
<div id="contenedor">
<div id="contenedor_refresco" class="refresco" style="display: none;"><button href="javascript:void(0);" title="Refrescar página" onclick="javascript:f_forzar_recarga_mensajes();"><span>Hay mensajes nuevos</span></button></div>
<div id="contenedor_error" class="notificaciones" style="display: none;"></div>
<div class="contenedor-config-pag oculto" id="configurador_selector">
<div class="configurador">
<div class="configurador__interior">
<h4>Ver</h4>
<button id="btn_seleccionado" onclick="comentarios.muestraCapa(&#39;capaSelector&#39;);"><em>Más </em>recientes primero</button>
<div class="capa-configurador oculto" id="capaSelector">
<ul>
<li onclick="javascript:comentarios.changeSrc(&#39;timeline&#39;);"><button id="btn_timeline"><em>Más </em>recientes primero</button></li>
<li onclick="javascript:comentarios.changeSrc(&#39;top-oldies&#39;);"><button id="btn_top-oldies"><em>Más </em>antiguos primero</button></li>
<li onclick="javascript:comentarios.changeSrc(&#39;top-rated&#39;);"><button id="btn_top-rated">Mejor valorados</button></li>
<li onclick="javascript:comentarios.changeSrc(&#39;conversacion&#39;);"><button id="btn_conversacion"><em>En </em>modo conversación</button></li>
</ul>
</div>
</div>
</div>
<div id="contenedor_paginacion_arriba" class="paginacion" style="display: none;"></div>
<!--- AQUI PAGINACION SUP -->
</div>
<div id="contenedor_error_valoracion" class="notificaciones valorados" style="display: none;"></div>
<!--     <div id="id_num_mensajes_hilo"></div> -->
<div id="id_hilo_cerrado" style="display: block;" class="escribirmensaje"><div class="notificaciones"><p class="variaslineas">Comentarios cerrados</p></div></div>
<div id="id_contenedor_paginacion"></div>
<main id="contenedor_mensajes" class="mensajes "></main>
<div id="contenedor_paginacion" class="paginacion" style="display: none;"></div>
<div class="contenedorpaginacion">
<div id="contenedor_paginacion_abajo" class="paginacion" style="display: none;"></div>
<a id="div_subir_pagina" title="Subir" href="javascript:void(0);" onclick="javascript:f_ir_arriba();" class="subir" style="display: none;"></a>
</div>
</div>
<div id="plantilla_mensaje" style="display:none">
<article id="mensaje_#MSG:ID#" class="#MSG:INI_MIO#mio#MSG:FIN_MIO#
#MSG:HIJO# #MSG:INI_MSG_BORRADO# borrado#MSG:FIN_MSG_BORRADO#
#MSG:INI_FLOTANTE# flotante#MSG:FIN_FLOTANTE#
#MSG:INI_MSG_PROVISIONAL# provisional#MSG:FIN_MSG_PROVISIONAL#
#MSG:INI_MSG_OPINADOR# destacado#MSG:FIN_MSG_OPINADOR#">
<div class=" article__interior" id="contenedortexto_#MSG:ID#">
#MSG:INI_DIV_FLOTANTE#<div id="flotante_#MSG:ID#" class=""></div>#MSG:FIN_DIV_FLOTANTE#
<div class="article__contenido" id="comentario_#MSG:ID#">
<button class="cerrar" title="Cerrar mensaje" onclick="document.getElementById(&#39;enlacemostrarrespuesta_#MSG:ID_BTN_FATHER#&#39;).onclick();"><span class="icon-cerrar"></span><span class="literal">Cerrar</span></button>
<footer #msg:ini_no_foto_usuario#class="no-foto" #msg:fin_no_foto_usuario#="">
<div class="header-fecha">
<a href="https://cincodias.elpais.com/Comentario/#MSG:ID#" target="_blank" title="Ver el enlace permanente" rel="nofollow">
<span id="contador_#MSG:ID#" class="contador"></span>
<time datetime="2015-06-26T09:00Z">#MSG:HORA#</time><span class="icon-link"></span></a>
</div>
<div class="header-autores">
<div class="header-autor">
<div class="avatar">#MSG:ETIQUETA_INICIO_IMG# src="#MSG:FOTO_USUARIO#" width="100" height="100"  alt="avatar" #MSG:ETIQUETA_FIN_IMG# </div>
<p class="autor">#MSG:NOMBRE_USUARIO#</p>
#MSG:INI_DIV_CONVERSACION#
#MSG:INI_DIV_RESPUESTA#
<button id="enlacemostrarrespuesta_#MSG:ID#" class="header-responde #MSG:BTNRESPUESTAOCULTO#" onclick="javascript:mostrarComentarioRespuesta(&#39;#MSG:ID#&#39;, &#39;#MSG:ID_HILO#&#39;, &#39;#MSG:ID_MSG_RESPUESTA#&#39;);this.classList.toggle(&#39;pulsado&#39;);comentarios.toggleColapsado(&#39;flotante_#MSG:MSG_ID#&#39;); " title="Ver mensaje al que responde">
<span class="icon-responde"></span>
#MSG:NOMBRE_USUARIO_RESPUESTA#
</button>
#MSG:FIN_DIV_RESPUESTA#
#MSG:FIN_DIV_CONVERSACION#
<div id="conversacion_#MSG:ID#" class="oculto"></div>
<div id="conversacion_#MSG:IDFATHER#"></div>
#MSG:INI_MSG_OPINADOR#
<div class="distintivo">
<p>Usuario destacado</p>
</div>
#MSG:FIN_MSG_OPINADOR#
</div><!-- cierre header-autor -->
</div><!-- cierre header-autores"-->
</footer>
<div class="article__columna">
<section class="comentario" id="comentarioarticle_#MSG:ID#">
<button title="Mostrar más" class="desplegar oculto" onclick="this.parentNode.classList.toggle(&#39;alto-libre&#39;); this.firstChild.innerHTML = &#39;Mostrar menos&#39;;"><div>Mostrar más</div></button>
<div class="comentario-contenido">
<div id="contenidomensaje_#MSG:ID#" class="comentario-txt"> #MSG:CONTENIDO#</div> 
</div>
#MSG:INI_FOTO_IZQUIERDA#
<div class="comentario-foto">
<button onclick="this.classList.toggle(&#39;oculto&#39;); document.getElementById(&#39;#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#imagenmensaje_#MSG:ID#&#39;).classList.toggle(&#39;colapsado&#39;);ESKUP.classToggle(&#39;comentarioarticle_#MSG:ID#&#39;);">Ver imagen</button>
<figure id="#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#imagenmensaje_#MSG:ID#" class="colapsado">
#MSG:ETIQUETA_INICIO_IMG# src="#MSG:FOTO#" #MSG:ETIQUETA_FIN_IMG#
</figure>
</div>
#MSG:FIN_FOTO_IZQUIERDA#
#MSG:INI_FOTO_COMPLETA#
<div class="comentario-foto">
<button onclick="this.classList.toggle(&#39;oculto&#39;); document.getElementById(&#39;#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#imagenmensaje_#MSG:ID#&#39;).classList.toggle(&#39;colapsado&#39;);ESKUP.classToggle(&#39;comentarioarticle_#MSG:ID#&#39;);">Ver imagen</button>
<figure id="#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#imagenmensaje_#MSG:ID#" class="colapsado">#MSG:ETIQUETA_INICIO_IMG# src="#MSG:FOTO#" #MSG:ETIQUETA_FIN_IMG#</figure>
</div>
#MSG:FIN_FOTO_COMPLETA#
#MSG:INI_FOTO_COMPLETA_CON_LARGE#
<div class="comentario-foto" id="#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#lar_contenedor_imagen_#MSG:ID#">
<button onclick="comentarios.checkDimImg(&#39;#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#lar_contenedor_imagen_#MSG:ID#&#39;,&#39;#MSG:FOTO_LARGE#&#39;, &#39;#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#foto_#MSG:ID#&#39;,&#39;#MSG:FOTO_WIDTH_LARGE#&#39;, &#39;#MSG:FOTO_HEIGHT_LARGE#&#39;,&#39;#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#amplimagenmensaje_#MSG:ID#&#39;);this.classList.toggle(&#39;oculto&#39;); document.getElementById(&#39;#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#imagenmensaje_#MSG:ID#&#39;).classList.toggle(&#39;colapsado&#39;);">Ver imagen</button>
<figure id="#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#imagenmensaje_#MSG:ID#" class="colapsado">
#MSG:ETIQUETA_INICIO_IMG# id='#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#foto_#MSG:ID#' src="#MSG:FOTO#" width="#MSG:FOTO_WIDTH#" height="#MSG:FOTO_HEIGHT#" title="" alt="" #MSG:ETIQUETA_FIN_IMG#
<button href="javascript:void(0);" class="ampliar-foto" title="Pulsa para ampliar" id="#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#amplimagenmensaje_#MSG:ID#" onclick="javascript:ampliaFotoEskup(this, &#39;#MSG:FOTO_LARGE#&#39;, &#39;#MSG:FOTO_WIDTH_LARGE#&#39;, &#39;#MSG:FOTO_HEIGHT_LARGE#&#39;, &#39;Foto del mensaje&#39;);">
<span class="rotulo" id="capaAmpliarFotoHover_#MSG:ID#"><span class="icon-ampliar"></span>Ampliar foto</span>
</button>
</figure>
</div>
#MSG:FIN_FOTO_COMPLETA_CON_LARGE#
#MSG:INI_MSG_PTE_PREMODERACION#
<div class="notificaciones">
<p>El mensaje se ha enviado correctamente</p>
<p>(En moderación)</p>
</div>
#MSG:FIN_MSG_PTE_PREMODERACION#
</section>
<div id="#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#contenedor_formulario_#MSG:ID#" style="display:none;"></div>
<div class="notificaciones oculto" id="#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#notificaciones_#MSG:ID#">
<p id="#MSG:INI_FLOTANTE#flot_#MSG:FIN_FLOTANTE#notificacionesTexto_#MSG:ID#"></p>
</div>
<section class="herramientas">
<div class="herramientas-acciones">
<div class="capainfo" id="capainfo_#MSG:ID#" style="display:none;"></div>
#MSG:INI_DIV_MENU#
<div id="compartir_#MSG:ID#" class="accion compartir" style="display:&#39;&#39;;">
<button title="Compartir" onclick="this.parentNode.classList.toggle(&#39;pulsado&#39;); comentarios.muestraCapa(&#39;compartirlist_#MSG:ID#&#39;,&#39;compartir_#MSG:ID#&#39;);">
<span class="icon-share"></span>
<span class="literal">Compartir</span>
</button>
<div id="compartirlist_#MSG:ID#" class="capa capa-rrss oculto">
<ul>
<li id="fbshared_#MSG:ID#" class="facebook" title="Recomendar en Facebook" onclick="javascript:ESKUP.rrss.facebookShare(&#39;#MSG:ID#&#39;,fbSharedTextCom);">
<span class="icon-facebook"></span>
Facebook
</li>
<li id="twshared_#MSG:ID#" class="twitter" title="Twittear" onclick="javascript:ESKUP.rrss.twitterShare(&#39;#MSG:ID#&#39;,twSharedTextCom);">
<span class="icon-twitter"></span>
Twitter
</li>
<li id="lnshared__#MSG:ID#" class="linkedin" title="Enviar a LinkedIn" onclick="javascript:ESKUP.rrss.linkedinShare(&#39;#MSG:ID#&#39;,lkSharedTextCom);">
<span class="icon-linkedin"></span>
LinkedIn
</li>
<li id="gpshared__#MSG:ID#" class="googleplus" title="Enviar a Google +" onclick="javascript:ESKUP.rrss.googleplusShare(&#39;#MSG:ID#&#39;,gpSharedTextCom);">
<span class="icon-google-plus"></span>
Google +
</li>
</ul>
</div>
</div>
<div class="accion votar-doble">
<div id="valoracion_positivas_#MSG:ID#" class="voto positivo">
<button id="enlace_valoraciones_positivas_#MSG:ID#" onclick="comentarios.muestraCapa(&#39;tt_valoraciones_positivas_#MSG:ID#&#39;);">
<span class="icon-valorar"></span>
</button>
<div id="valoraciones_positivas_#MSG:ID#" class="votar-contador">#MSG:VALORACION_POSITIVE#</div>
<div id="tt_valoraciones_positivas_#MSG:ID#" class="tooltip oculto">Tienes que estar registrado y haber iniciado sesión para poder usar esta funcionalidad</div>
</div>
<div id="valoracion_negativas_#MSG:ID#" class="voto negativo">
<button id="enlace_valoraciones_negativas_#MSG:ID#" onclick="comentarios.muestraCapa(&#39;tt_valoraciones_negativas_#MSG:ID#&#39;);">
<span class="icon-valorar"></span>
</button>
<div id="valoraciones_negativas_#MSG:ID#" class="votar-contador">#MSG:VALORACION_NEGATIVE#</div>
<div id="tt_valoraciones_negativas_#MSG:ID#" class="tooltip oculto">Tienes que estar registrado y haber iniciado sesión para poder usar esta funcionalidad</div>
</div>
</div>
<div class="accion menu">
<button id="masopciones_#MSG:ID#" onclick="comentarios.addClass([&#39;insertar_#MSG:ID#&#39;,&#39;denunciar_#MSG:ID#&#39;,&#39;gracias_#MSG:ID#&#39;],&#39;oculto&#39;);comentarios.removeClass([&#39;masopciones_#MSG:ID#&#39;,&#39;insertar_#MSG:ID#&#39;,&#39;botonInsertar_#MSG:ID#&#39;,&#39;botonMarcar_#MSG:ID#&#39;,&#39;capaMenu_#MSG:ID#&#39;],&#39;pulsado&#39;);comentarios.muestraCapa(&#39;capaMenu_#MSG:ID#&#39;,&#39;masopciones_#MSG:ID#&#39;); comentarios.removeClass([&#39;capaMenu_#MSG:ID#&#39;,],&#39;denunciar&#39;);" title="Más opciones">
<span class="icon-mas"></span>
<span class="literal">Más opciones</span>
</button>
<div id="capaMenu_#MSG:ID#" class="capa capa-menu oculto">
<div class="opciones">
<ul>
<li id="botonInsertar_#MSG:ID#" class="boton-insertar" onclick="comentarios.addClass([&#39;botonInsertar_#MSG:ID#&#39;,&#39;capaMenu_#MSG:ID#&#39;,],&#39;pulsado&#39;);comentarios.removeClass([&#39;botonMarcar_#MSG:ID#&#39;,],&#39;pulsado&#39;);comentarios.removeClass([&#39;insertar_#MSG:ID#&#39;,],&#39;oculto&#39;);comentarios.addClass([&#39;denunciar_#MSG:ID#&#39;,&#39;gracias_#MSG:ID#&#39;],&#39;oculto&#39;);comentarios.removeClass([&#39;capaMenu_#MSG:ID#&#39;,],&#39;denunciar&#39;);" title="Insertar">
<span class="icon-embed"></span>
<span class="literal">Insertar</span>
</li>
<li id="botonMarcar_#MSG:ID#" class="boton-marcar" onclick="comentarios.muestraCapa(&#39;tt_denunciar_#MSG:ID#&#39;);">
<span class="icon-marcar"></span>
<span class="literal">Denunciar</span>
<div id="tt_denunciar_#MSG:ID#" class="tooltip oculto">Tienes que estar registrado y haber iniciado sesión para poder usar esta funcionalidad</div>
</li>
<li class="boton-editar" onclick="javascript:ESKUP.switchEditarMensaje(&#39;#MSG:ID#&#39;,&#39;#MSG:CONTENIDO_NO_PROCESADO#&#39;,#MSG:PREMODERACION#); ESKUP.classToggle(&#39;capaMenu_#MSG:ID#&#39;,&#39;oculto&#39;); ESKUP.classToggle(&#39;escribirMensaje_#MSG:ID#&#39;,&#39;colapsado&#39;);" title="Editar mensaje">
<span class="icon-editar"></span>
<span class="literal">Editar</span>
</li>
<li class="boton-borrar" onclick="document.getElementById(&#39;capaMenu_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;); document.getElementById(&#39;capaConfirmacion_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;);" title="Borrar mensaje">
<span class="icon-borrar"></span>
<span class="literal">Borrar</span>
</li>
</ul>
</div>
<div id="insertar_#MSG:ID#" class="sub insertar oculto">
<p>Copia y pega este código en tu página:</p>
<div class="codigo">
<textarea onclick="this.focus();this.select();" readonly="readonly">&lt;script src="https://cincodias.elpais.com/Comentario/embed/#MSG:ID#"&gt;&lt;/script&gt;</textarea>
</div>
</div>
<div id="denunciar_#MSG:ID#" class="sub denunciar oculto">
<ul>
<li class="boton-insulto" onclick="document.getElementById(&#39;denunciar_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;); document.getElementById(&#39;gracias_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;); notificarMensajeInsulto(&#39;#MSG:ID#&#39;,&#39;1&#39;,&#39;#MSG:NICKNAMEFEO_USUARIO#&#39;);">Insulto</li>
<li class="boton-spam" onclick="document.getElementById(&#39;denunciar_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;); document.getElementById(&#39;gracias_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;);notificarMensajeSpam(&#39;#MSG:ID#&#39;,&#39;1&#39;,&#39;#MSG:NICKNAMEFEO_USUARIO#&#39;);">Spam</li>
<li class="boton-offtopic" onclick="document.getElementById(&#39;denunciar_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;); document.getElementById(&#39;gracias_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;);notificarMensajeFueraDeTema(&#39;#MSG:ID#&#39;,&#39;1&#39;,&#39;#MSG:NICKNAMEFEO_USUARIO#&#39;);">Fuera de tema</li>
</ul>
</div>
<div id="gracias_#MSG:ID#" class="sub mensaje-gracias oculto">
<div class="mensaje-gracias__interior">
<p>Muchas gracias por colaborar</p>
</div>
</div>
</div>
</div>
#MSG:FIN_DIV_MENU#
</div><!-- fin herramientas acciones -->
<!-- NO PASAR ESTE BLOQUE A PRO HASTA QUE NO ESTE PARSEADO EN ESKUP JS -->
#MSG:INI_BOTON_VERCONVERSACION#
#MSG:FIN_BOTON_VERCONVERSACION#
</section>
</div>
</div>
#MSG:INI_MSG_PROVISIONAL#
<div class="rotulo-provisional">
<div class="rotulo-provisional__interior"><p id="explicacion_#MSG:ID#"></p>
</div>
</div>
#MSG:FIN_MSG_PROVISIONAL#
<div class="capa-confirmacion oculto" id="capaConfirmacion_#MSG:ID#">
<button class="cerrar" onclick="document.getElementById(&#39;capaConfirmacion_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;);" title="Cerrar mensaje"><span class="icon-cerrar"></span><span class="literal">Cerrar</span></button>
<div class="capa-confirmacion__interior">
<p>¿Estás seguro de que deseas borrar tu mensaje?</p>
<div class="acciones">
<button class="si" onclick="document.getElementById(&#39;capaConfirmacion_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;);borrarMensajeComun(&#39;#MSG:ID#&#39;);">Sí</button>
<button class="no" onclick="document.getElementById(&#39;capaConfirmacion_#MSG:ID#&#39;).classList.toggle(&#39;oculto&#39;);">No</button>
</div>
</div>
</div><!-- cierre capa-confirmacion -->
</div><!-- cierre article__interior -->
</article>
</div>
<script language="Javascript" type="text/javascript">
//<![CDATA[

function cerrarMensajeFlotanteContenedor(el) {

    while (el.parentNode) {
        el = el.parentNode;
        if (typeof el.id != "undefined" && el.id.match(/^flotante_(.*)/)) {
            // Vaciamos el contenido del DIV
            el.innerHTML = '';
            // Y cambiamos el title del icono
            if (RegExp.$1 && document.getElementById("enlacemostrarrespuesta_" + RegExp.$1)) {
                document.getElementById("enlacemostrarrespuesta_" + RegExp.$1).title = "Ver mensaje al que responde";
            }
        }
    }
}
//]]>
</script>
<div id="contenedor_formulario" style="display: none">
<div class="escribirmensaje" id="escribirmensaje_#ID#">
<div class="escribirmensaje__interior">
<div class="recipientes" id="id_recipientes_#ID#" style="display: none;"></div> 
<form method="post" action="https://cincodias.elpais.com/Ineskup" enctype="multipart/form-data" id="form_#ID#">
<input type="hidden" id="x_#ID#" name="x" value="">
<input type="hidden" id="t_#ID#" name="t" value="">
<input type="hidden" id="c_#ID#" name="c">
<input type="hidden" id="d_#ID#" name="d" value="">
<input type="hidden" name="f" value="html">
<input type="hidden" name="toxicities" id="toxicities_#ID#" value="">
<input type="hidden" name="toxicity_s" id="toxicity_s_#ID#" value="">
<input type="hidden" name="id_related_msgs" id="id_related_msgs_#ID#" value="YH31xn8AAQEAACaHR1kAAAAm">
<input type="hidden" name="s" id="s" value="6a112cdefd0683252b9efad11fb38fa3">
<input type="hidden" name="lang" id="lang_#ID#" value="es">
<input type="hidden" name="edition" id="edition_#ID#" value="cincodias.elpais.com">
<input type="hidden" id="rp_#ID#" name="rp" value="0">
<textarea id="m_#ID#" name="m" placeholder="Tu respuesta" onkeypress="javascript:return f_tecleando(event, &#39;m_#ID#&#39;, &#39;etiqueta_numero_maximo_caracteres_#ID#&#39;);" onkeyup="javascript:return f_tecleando(event, &#39;m_#ID#&#39;, &#39;etiqueta_numero_maximo_caracteres_#ID#&#39;);" onkeydown="javascript:return f_tecleando(event, &#39;m_#ID#&#39;, &#39;etiqueta_numero_maximo_caracteres_#ID#&#39;);" onchange="javascript:f_tecleando(event, &#39;m_#ID#&#39;, &#39;etiqueta_numero_maximo_caracteres_#ID#&#39;);"></textarea>
<div id="secundario_m_#ID#">
</div>
<div class="herramientas">
<div class="herramientas-formateo">
<button class="negrita" id="boton_negrita" href="javascript:void(0);" onclick="javascript:insertaTagEnMensaje(&#39;m_#ID#&#39;, &#39;b&#39;);return false;"><strong>N</strong>
<div class="tooltip">Insertar negrita <sup>CONTROL+N</sup></div>
</button>
<button class="cursiva" id="boton_cursiva" href="javascript:void(0);" onclick="javascript:insertaTagEnMensaje(&#39;m_#ID#&#39;, &#39;i&#39;);return false;"><em>I</em>
<div class="tooltip">Insertar cursiva <sup>CONTROL+I</sup></div>
</button>
<label id="adjuntarImagen_#ID#" class="adjuntar-imagen" onclick="this.classList.toggle(&#39;oculto&#39;); document.getElementById(&#39;borrarImagen_#ID#&#39;).classList.toggle(&#39;oculto&#39;);">
<input type="file" accept="image/gif,image/jpeg,image/jpg,image/png" id="p_#ID#" name="p">
<button class="imagen">
<span class="icon-imagen"></span>
Adjuntar imagen</button>
</label>
<div id="borrarImagen_#ID#" class="borrar-imagen oculto" onclick="this.classList.toggle(&#39;oculto&#39;);">
<button class="borrar" onclick="f_quita_imagen_adjuntada(&#39;p_#ID#&#39;);document.getElementById(&#39;adjuntarImagen_#ID#&#39;).classList.toggle(&#39;oculto&#39;);return false;">
<span class="icon-borrar"></span>
Borrar imagen</button>
</div>
</div>
<div class="herramientas-botones">
<div class="contador">
<p class="numero" id="etiqueta_numero_maximo_caracteres_#ID#">#NUMERO_CARACTERES_MENSAJE#</p>
</div>
<button class="cancelar" onclick="javascript:f_ocultar_formulario_mensaje(&#39;#ID#&#39;);comentarios.classDel(&#39;contenedorResponder_#ID#&#39;,&#39;pulsado&#39;);return false;">Cancelar</button>
<a class="button" href="javascript:void(0);" onclick="javascript:checkPerspective(&#39;#ID#&#39;,&#39;m_#ID#&#39;,true,_urlNoticia);">Publicar</a>
<div class="herramientas-aviso oculto" name="herramientas-aviso" id="herramientas-aviso-m_#ID#"></div>
</div>
</div>
</form>
</div>
</div>
</div>
<script language="Javascript" type="text/javascript">
    var herramientas_aviso;
    var _iteracion  = 0;
    var _idMsg      = '';
    var _idTextarea = '';
    var _responder  = false;
    var _txtMsg     = '';
    var _toxicities = '';
    var _toxicity_s = '';
    function callbackPerspective(httpRequest){
        _txtMsg = document.getElementById(_idMsg).value;
        var premensaje = herramientas_aviso;
        var textoPremensaje = 'Ha habido un error';
        try{
            var h_data      = JSON.parse(httpRequest.responseText);
            _toxicities     = JSON.stringify(h_data['result']);
            _toxicity_s     = h_data['toxicity_s'];
            var toxicity    = h_data['result'].TOXICITY_EXPERIMENTAL;
            //let max_toxic   = h_data['max_toxicity'];
            var status      = h_data['status'];
            if (status == 'ok'){    
                if (toxicity>0.8){
                    textoPremensaje = 'Hemos detectado que el contenido de tu comentario puede incumplir <a href="https://elpais.com/estaticos/normas-de-participacion/" target="_blank">los principios y normas de participación de EL PAÍS</a>. Para facilitar la publicación puedes editar el comentario de acuerdo con las normas o enviarlo para que lo revisen nuestros moderadores. <b>¡Muchas gracias!</b>';
                    premensaje.classList.remove('oculto');
                }else{
                    doPublica();
                }
            }
        }catch(err){doPublica();}
        premensaje.innerHTML = '<button class="icon-cerrar" onclick="javascript:ocultaMensajePerspective();return false;">Cerrar</button>'+textoPremensaje;
    }
    function ocultaMensajePerspective(){
        if (herramientas_aviso){
            herramientas_aviso.classList.add('oculto');
        }
    }
    function callbackPerspectiveSecond(httpRequest){
        try{
            var h_data      = JSON.parse(httpRequest.responseText);
            var status      = h_data['status'];
            if (status == 'ok'){  
                _toxicities   = JSON.stringify(h_data['result']);
                _toxicity_s   = JSON.stringify(h_data['toxicity_s']);
            }
        }catch(err){}
        doPublica();
    }
function doPublica(){
    _txtMsg = '';
    if (typeof _toxicities!='undefined'){
        toxicities = document.getElementsByName('toxicities');
        for(var i=0;i<toxicities.length;i++){
            toxicities[i].value= _toxicities;
        }
        toxicity_s = document.getElementsByName('toxicity_s');
        for(var i=0;i<toxicity_s.length;i++){
            toxicity_s[i].value= _toxicity_s;
        }
    }
    if (_responder){
        submitFormularioMensaje(_idTextarea);
        document.getElementById('linkresponder_#ID#').classname=''; 
        return false;
    }else{
        f_publica('multiple');
        // Cada vez que se publica modificamos el id_related_msgs
        _iteracion++;
        related_msgs = document.getElementById('id_related_msgs');
        if (related_msgs){
            a_tmp = related_msgs.value.split('_');
            related_msgs.value=a_tmp[0]+'_'+_iteracion;
        }
    }
    //comentarios.postPublica();
}
function checkPerspective(idTextarea,idMsg,responder,urlNoticia){
    _idTextarea = idTextarea;
    _idMsg      = idMsg;
    _responder  = responder;
    herramientas_aviso = document.getElementById('herramientas-aviso-'+idMsg);
    ocultaMensajePerspective();
    var msg = document.getElementById(idMsg).value;
    // Solo si el usuario ha cambiado el texto se vuelve a llamar a perspective
    if (msg != _txtMsg){
        var endPoint = 'perspective.php?text='+encodeURI(msg);
        related_msgs = document.getElementById('id_related_msgs');
        if (related_msgs){
            endPoint+='&id_related_msgs='+related_msgs.value;
        }
        if (urlNoticia){
            endPoint+='&urlNoticia='+encodeURIComponent(urlNoticia)+'&o=1';
        }
        if (typeof _idiomaCompleto != 'undefined'){
            endPoint+='&lang='+_idiomaCompleto;
        }else if (LANGESKUP !=null){
            endPoint+='&lang='+LANGESKUP;
        }

        EPETUtils_makeHttpRequestGet(callbackPerspective,endPoint);
    }else{
        doPublica();
    }
}

//<![CDATA[

// Hay que comprobar si el texto del mensaje hay que cambiarlo por ser premoderado
var cambiaTexto= setInterval("cambiaTextoMensaje()",100);
//]]>
/* Comprobamos si el hilo no esta premoderado para cambiar el mensaje de aviso al usuario
*  ya que si es premoderado no debe salir "estamos moderando". Hay que hacerlo en JS porque el campo
*  premoderado viene en el json de OutEskup y solo se puede sacar en JS. Por eso se hace con setInterval
*/
function cambiaTextoMensaje(){
	if (typeof _hashMsgs.perfilesHilos != "undefined" && typeof _hashMsgs.perfilesHilos['_'+_hilo] != "undefined"){
		var premoderacion = _hashMsgs.perfilesHilos['_'+_hilo]['premoderacion'];
		if (premoderacion=='0' || !premoderacion){
			document.getElementById("explicacion_#MSG:ID#").innerHTML='';
		}
		clearInterval(cambiaTexto);
	}
}

/**
 * funcion para personalizar la forma de pintado de los mensajes
 */
var callBackAvisoResponderMensajes = function(params){
    var aviso = '';
    var idMensaje;
    var txtPremoderacion = "";
    if(typeof params['idMensaje'] != 'undefined'){
        if(typeof params['aviso'] != 'undefined' && params['aviso'] != ''){
            aviso = " ("+params['aviso']+")";
        }
        if (typeof params['hayPremoderacion'] != 'undefined' && params['hayPremoderacion'] == true &&  !(typeof params['_soyOpinador'] != "undefined" &&params['_soyOpinador'] == true)){
            txtPremoderacion = " <p>" + _ESKUPhashMsgByLang[LANGESKUP].pendiente_moderacion + "</p>"; 
        }

        if(document.getElementById("notificaciones_"+params['idMensaje'])){

        document.getElementById("notificaciones_"+params['idMensaje']).className = document.getElementById("notificaciones_"+params['idMensaje']).className.replace(/oculto/g,'');
        document.getElementById("notificacionesTexto_"+params['idMensaje']).innerHTML =  _ESKUPhashMsgByLang[LANGESKUP].mensaje_enviado_correctamente + aviso + txtPremoderacion;
        }
    }
    //Hacemos modificaciones en el boton de responder
    if (document.getElementById("linkresponder_" + params['idMensaje']) && typeof mantenerBtnResponder != 'undefined') {
        document.getElementById("linkresponder_" + params['idMensaje']).classList.remove("boton","responder","activo");
    }
    if (document.getElementById("contenedorResponder_"+params['idMensaje']) && typeof mantenerBtnResponder != 'undefined'){
        document.getElementById("contenedorResponder_"+params['idMensaje']).classList.remove("pulsado");
    }
}

/**
 * Funcion para personalizar la forma de pintado de la paginacion
 */
var callBackPintaPaginacion = function(){
    var html = '<div class="paginacion__interior"><ul>';
    if (_numPagActual == 1) {
        html += '<li><span class="inicio" title="' + _ESKUPhashMsgByLang[LANGESKUP].primera_pagina + '"><em>Primera página</em></span></li>';
    } else {
        if (typeof _formatoVisualizacion != 'undefined' && _formatoVisualizacion == 'movil') {
              html += '<li><a href="javascript:void(0);" class="inicio" onClick="irAPagina(1);" title="' + _ESKUPhashMsgByLang[LANGESKUP].primera_pagina + '"><em>Primera página</em></a></li>';
        } else {
              html += '<li><a href="javascript:void(0);" class="inicio" onClick="muestraMensajes(1, true);posicionarEnDivMensajes();" title="' + _ESKUPhashMsgByLang[LANGESKUP].primera_pagina + '"><em>Primera página</em></a></li>';
        }
    }

   if (_numPagActual > 1) {
        if (typeof _formatoVisualizacion != 'undefined' && _formatoVisualizacion == 'movil') {
             html += '<li><a href="javascript:void(0);" onClick="irAPagina(' + (_numPagActual-1) + ');" class="anterior" title="' + _ESKUPhashMsgByLang[LANGESKUP].pagina_anterior + '">Página anterior</a></li>';
        } else {
             html += '<li><a href="javascript:void(0);" onClick="muestraMensajes(' + (_numPagActual-1) + ', true);posicionarEnDivMensajes();" class="anterior" title="' + _ESKUPhashMsgByLang[LANGESKUP].pagina_anterior + '">Página anterior</a></li>';
        }
    } else {
        html += '<li><span class="anterior" title="' + _ESKUPhashMsgByLang[LANGESKUP].pagina_anterior + '">Página anterior</span></li>';
    }
    html += '<li class="pagina">' + _numPagActual + '</li>';

    if (parseInt(_numPagActual*_numMsgPag) < parseInt(_hashMsgs.numMensajes)) {
       if (typeof _formatoVisualizacion != 'undefined' && _formatoVisualizacion == 'movil') {
           html += '<li><a href="javascript:void(0);" onClick="irAPagina(' + (_numPagActual+1) + ');" class="siguiente" title="' + _ESKUPhashMsgByLang[LANGESKUP].pagina_siguiente + '">Página siguiente</a></li>';
       } else {
           html += '<li><a href="javascript:void(0);" onClick="muestraMensajes(' + (_numPagActual+1) + ', true);posicionarEnDivMensajes();" class="siguiente" title="' + _ESKUPhashMsgByLang[LANGESKUP].pagina_siguiente + '">Página siguiente</a></li>';
       }
    } else {
       html += '<li><span class="siguiente" title="' + _ESKUPhashMsgByLang[LANGESKUP].pagina_siguiente + '">Página siguiente</span></li>';
    }

    html += '</ul></div>';
  return html;
}
</script>


</body></html>